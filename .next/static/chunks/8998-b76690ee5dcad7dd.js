"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8998],{3998:(e,t,r)=>{r.d(t,{$:()=>l});var n=r(95155),s=r(12115),o=r(32467),i=r(83101),a=r(64269);let c=(0,i.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all duration-200 ease-out focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-cyan-400/50 focus-visible:shadow-[0_0_20px_rgba(34,211,238,0.15)] disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-cyan-600 text-white shadow-[0_0_20px_rgba(34,211,238,0.1)] hover:bg-cyan-500 hover:shadow-[0_0_30px_rgba(34,211,238,0.15)] hover:scale-105 border border-cyan-500/50",destructive:"bg-red-600 text-white shadow-[0_0_20px_rgba(239,68,68,0.1)] hover:bg-red-500 hover:shadow-[0_0_30px_rgba(239,68,68,0.15)] border border-red-500/50",outline:"border border-cyan-500/30 bg-black/20 backdrop-blur-xl text-cyan-100 shadow-[0_0_20px_rgba(34,211,238,0.05)] hover:bg-cyan-500/10 hover:text-cyan-400 hover:shadow-[0_0_30px_rgba(34,211,238,0.1)]",secondary:"bg-slate-600 text-slate-100 shadow-[0_0_20px_rgba(71,85,105,0.1)] hover:bg-slate-500 hover:shadow-[0_0_30px_rgba(71,85,105,0.15)] border border-slate-500/50",ghost:"text-cyan-100 hover:bg-cyan-500/10 hover:text-cyan-400",link:"text-cyan-400 underline-offset-4 hover:underline hover:text-cyan-300"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),l=s.forwardRef((e,t)=>{let{className:r,variant:s,size:i,asChild:l=!1,...u}=e,d=l?o.DX:"button";return(0,n.jsx)(d,{className:(0,a.cn)(c({variant:s,size:i,className:r})),ref:t,...u})});l.displayName="Button"},11647:(e,t,r)=>{r.d(t,{E:()=>a});var n=r(95155);r(12115);var s=r(83101),o=r(64269);let i=(0,s.F)("inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground shadow hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground shadow hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function a(e){let{className:t,variant:r,...s}=e;return(0,n.jsx)("div",{className:(0,o.cn)(i({variant:r}),t),...s})}},13028:(e,t,r)=>{r.d(t,{c:()=>S,s:()=>d});var n=r(95155),s=r(65380),o=r(66013),i=r(56189),a=r(12115);let c={answers:[],isLoading:!1,error:null};function l(e,t){switch(t.type){case"LOAD_ANSWERS":return{...e,answers:t.payload,isLoading:!1};case"ADD_INCORRECT_ANSWER":{let r=[{...t.payload,id:"incorrect-".concat(Date.now(),"-").concat(Math.random().toString(36).substr(2,9)),timestamp:new Date,reviewed:!1,reviewCount:0},...e.answers];return r.length>100&&(r=r.slice(0,100)),{...e,answers:r}}case"MARK_REVIEWED":return{...e,answers:e.answers.map(e=>e.id===t.payload?{...e,reviewed:!0,reviewCount:e.reviewCount+1}:e)};case"REMOVE_ANSWER":return{...e,answers:e.answers.filter(e=>e.id!==t.payload)};case"CLEAR_ANSWERS":return{...e,answers:[]};case"SET_LOADING":return{...e,isLoading:t.payload};case"SET_ERROR":return{...e,error:t.payload,isLoading:!1};default:return e}}let u=(0,a.createContext)(void 0);function d(e){let{children:t}=e,[r,d]=(0,a.useReducer)(l,c),{user:S}=(0,s.A)();(0,o.t)(S);let[g,m]=(0,a.useState)(!1);(0,a.useEffect)(()=>{d({type:"SET_LOADING",payload:!0});try{let e=localStorage.getItem("tco-incorrect-answers");if(console.log("Loading from localStorage:",e?"".concat(JSON.parse(e).length," answers"):"no data"),e){let t=JSON.parse(e).map(e=>({...e,timestamp:new Date(e.timestamp)}));console.log("Parsed answers:",t.length),d({type:"LOAD_ANSWERS",payload:t})}else console.log("No saved answers found"),d({type:"LOAD_ANSWERS",payload:[]})}catch(e){console.error("Failed to load incorrect answers from localStorage:",e),d({type:"LOAD_ANSWERS",payload:[]})}finally{d({type:"SET_LOADING",payload:!1})}},[]),(0,a.useEffect)(()=>{if(!r.isLoading&&!S){let e=setTimeout(()=>{localStorage.setItem("tco-incorrect-answers",JSON.stringify(r.answers))},200);return()=>clearTimeout(e)}},[r.answers,r.isLoading,S]);let E=(0,a.useCallback)(async e=>{({...e,id:"incorrect-".concat(Date.now(),"-").concat(Math.random().toString(36).substr(2,9)),timestamp:new Date,reviewed:!1,reviewCount:0}),d({type:"ADD_INCORRECT_ANSWER",payload:e}),S||localStorage.setItem("tco-incorrect-answers",JSON.stringify(r.answers))},[null==S?void 0:S.id]),f=(0,a.useCallback)(async e=>{d({type:"MARK_REVIEWED",payload:e})},[null==S?void 0:S.id]),p=(0,a.useCallback)(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10;return r.answers.sort((e,t)=>t.timestamp.getTime()-e.timestamp.getTime()).slice(0,e)},[r.answers]),w=(0,a.useCallback)(async()=>{d({type:"CLEAR_ANSWERS"}),S||localStorage.removeItem("tco-incorrect-answers")},[null==S?void 0:S.id]),I=(0,a.useCallback)(async e=>{d({type:"REMOVE_ANSWER",payload:e}),S||localStorage.setItem("tco-incorrect-answers",JSON.stringify(r.answers))},[null==S?void 0:S.id]);return(0,n.jsx)(u.Provider,{value:{state:r,addIncorrectAnswer:E,markAsReviewed:f,getAnswersByDomain:e=>r.answers.filter(t=>t.domain===e),getUnreviewedCount:()=>r.answers.filter(e=>!e.reviewed).length,getRecentIncorrectAnswers:p,clearAllAnswers:w,removeAnswer:I,getTotalIncorrectCount:()=>r.answers.length,getDomainStats:()=>{let e={};return Object.values(i.TCODomain).forEach(t=>{e[t]={count:0,reviewed:0}}),r.answers.forEach(t=>{e[t.domain].count++,t.reviewed&&e[t.domain].reviewed++}),e}},children:t})}function S(){let e=(0,a.useContext)(u);if(void 0===e)throw Error("useIncorrectAnswers must be used within an IncorrectAnswersProvider");return e}},34784:(e,t,r)=>{r.d(t,{t:()=>g,v:()=>m});var n=r(95155),s=r(65380),o=r(13028),i=r(66013);r(62890);var a=r(56189);r(71985);var c=r(91055),l=r(12115);let u=(e,t)=>{switch(t.type){case"START_EXAM":let r={id:"session-".concat(Date.now()),mode:t.mode,questions:t.questions,currentIndex:0,answers:{},startTime:new Date,completed:!1};return{...e,currentSession:r,isLoading:!1,error:null};case"ANSWER_QUESTION":if(!e.currentSession)return e;let n={...e.currentSession,answers:{...e.currentSession.answers,[t.questionId]:t.answerId}};return{...e,currentSession:n};case"NEXT_QUESTION":if(!e.currentSession)return e;return{...e,currentSession:{...e.currentSession,currentIndex:Math.min(e.currentSession.currentIndex+1,e.currentSession.questions.length-1)}};case"PREVIOUS_QUESTION":if(!e.currentSession)return e;return{...e,currentSession:{...e.currentSession,currentIndex:Math.max(e.currentSession.currentIndex-1,0)}};case"FINISH_EXAM":if(!e.currentSession)return e;let s=Math.round(e.currentSession.questions.filter(t=>e.currentSession.answers[t.id]===t.correctAnswerId).length/e.currentSession.questions.length*100),o={...e.currentSession,endTime:new Date,score:s,completed:!0};return{...e,currentSession:o};case"RESET_EXAM":return{...e,currentSession:null,isLoading:!1,error:null};case"SET_LOADING":return{...e,isLoading:t.loading};case"SET_ERROR":return{...e,error:t.error,isLoading:!1};case"LOAD_SESSION":return{...e,currentSession:t.session,isLoading:!1};default:return e}},d=(0,l.createContext)(null),S={currentSession:null,isLoading:!1,error:null};function g(e){let{children:t}=e,[g,m]=(0,l.useReducer)(u,S),{user:E}=(0,s.A)(),f=(0,i.t)(E),{addIncorrectAnswer:p}=(0,o.c)(),[w,I]=(0,l.useState)(null);(0,l.useEffect)(()=>{let e=async()=>{var e,t,r,n,s;if(g.currentSession){if(E)try{if(w||g.currentSession.completed){if(w&&g.currentSession.completed){let n=g.currentSession.questions.filter(e=>g.currentSession.answers[e.id]===e.correctAnswerId).length,s=g.currentSession.endTime?Math.floor((g.currentSession.endTime.getTime()-g.currentSession.startTime.getTime())/1e3):0,o=Math.round(n/g.currentSession.questions.length*100);for(let[i,a]of(await f.updateExamSession(w,{completed_at:null==(e=g.currentSession.endTime)?void 0:e.toISOString(),score:o,correct_answers:n,time_spent:s,is_passed:o>=70}),Object.entries(g.currentSession.answers))){let e=g.currentSession.questions.find(e=>e.id===i);if(e){let n=a===e.correctAnswerId;await f.insertUserProgress({question_id:i,is_correct:n,selected_answer:String(a),time_taken:0,exam_session_id:w}),n||p({questionId:i,questionText:e.question,userAnswer:(null==(t=e.choices[parseInt(a)])?void 0:t.text)||"",correctAnswer:(null==(r=e.choices[parseInt(e.correctAnswerId)])?void 0:r.text)||"",domain:e.domain,sessionId:w})}}}}else{let e=await f.insertExamSession({session_type:g.currentSession.mode===a.ExamMode.PRACTICE?"practice":g.currentSession.mode===a.ExamMode.MOCK?"mock":"timed",started_at:g.currentSession.startTime.toISOString(),total_questions:g.currentSession.questions.length,correct_answers:0,time_spent:0});I(e.id)}}catch(e){console.error("Failed to save session to database:",e),localStorage.setItem("tco-exam-session",JSON.stringify(g.currentSession))}else if(localStorage.setItem("tco-exam-session",JSON.stringify(g.currentSession)),g.currentSession.completed&&p)for(let[e,t]of Object.entries(g.currentSession.answers)){let r=g.currentSession.questions.find(t=>t.id===e);r&&t!==r.correctAnswerId&&p({questionId:e,questionText:r.question,userAnswer:(null==(n=r.choices[parseInt(t)])?void 0:n.text)||"",correctAnswer:(null==(s=r.choices[parseInt(r.correctAnswerId)])?void 0:s.text)||"",domain:r.domain,sessionId:g.currentSession.id})}}};if(g.currentSession){let t=setTimeout(()=>{e()},200);return()=>clearTimeout(t)}I(null),localStorage.removeItem("tco-exam-session")},[g.currentSession,null==E?void 0:E.id,w,f,p]),(0,l.useEffect)(()=>{(async()=>{if(E)try{let e=(await f.getExamSessions()).find(e=>!e.completed_at);e&&(console.log("Found incomplete database session:",e.id),I(e.id))}catch(e){console.error("Failed to load session from database:",e)}(()=>{try{let e=localStorage.getItem("tco-exam-session");if(!e)return;let t=JSON.parse(e);if(!t.id||!t.mode||!Array.isArray(t.questions)){console.warn("Invalid session structure, removing corrupted data"),localStorage.removeItem("tco-exam-session");return}try{if(t.startTime=new Date(t.startTime),t.endTime&&(t.endTime=new Date(t.endTime)),isNaN(t.startTime.getTime()))throw Error("Invalid start time");if(t.endTime&&isNaN(t.endTime.getTime()))throw Error("Invalid end time")}catch(e){console.warn("Invalid date in session, resetting dates:",e),t.startTime=new Date,t.endTime=void 0}m({type:"LOAD_SESSION",session:t})}catch(e){console.error("Failed to load saved session:",e);try{localStorage.removeItem("tco-exam-session")}catch(e){console.error("Failed to cleanup corrupted session:",e)}}})()})()},[null==E?void 0:E.id]);let _=async(e,t)=>{console.log("ExamContext startExam called with mode:",e),console.log("Custom questions provided:",(null==t?void 0:t.length)||0),m({type:"SET_LOADING",loading:!0});try{let n;if(t)n=t,console.log("Using custom questions:",n.length);else if(e===a.ExamMode.MOCK)try{let{questionService:e}=await r.e(103).then(r.bind(r,103));n=await e.getMockExamQuestions(),console.log("Generated mock exam questions from DB (105)",n.length)}catch(t){let{getWeightedRandomQuestions:e}=await Promise.resolve().then(r.bind(r,91055));n=e(105),console.warn("Fallback to static weighted questions (105)")}else{let t=e===a.ExamMode.PRACTICE?25:20;try{let{questionService:e}=await r.e(103).then(r.bind(r,103));n=await e.getRandomQuestions(t),console.log("Generated practice questions from DB:",n.length)}catch(s){let{getWeightedRandomQuestions:e}=await Promise.resolve().then(r.bind(r,91055));n=e(t),console.warn("Fallback practice questions from static loader:",n.length)}}n&&0!==n.length||(console.warn("No questions available, falling back to all available questions"),n=(0,c.getAllQuestions)().slice(0,e===a.ExamMode.MOCK?105:25)),console.log("Final exam questions for session:",n.length),setTimeout(()=>{m({type:"START_EXAM",mode:e,questions:n})},500)}catch(e){console.error("Error starting exam:",e),m({type:"SET_ERROR",error:"Failed to start exam. Please try again."})}};return(0,n.jsx)(d.Provider,{value:{state:g,startExam:_,answerQuestion:(e,t)=>{m({type:"ANSWER_QUESTION",questionId:e,answerId:t})},nextQuestion:()=>{m({type:"NEXT_QUESTION"})},previousQuestion:()=>{m({type:"PREVIOUS_QUESTION"})},finishExam:()=>{m({type:"FINISH_EXAM"})},resetExam:()=>{m({type:"RESET_EXAM"})},getCurrentQuestion:()=>g.currentSession&&g.currentSession.questions[g.currentSession.currentIndex]||null,getProgress:()=>{if(!g.currentSession)return{current:0,total:0,percentage:0};let e=g.currentSession.currentIndex+1,t=g.currentSession.questions.length,r=Math.round(e/t*100);return{current:e,total:t,percentage:r}},getScore:()=>{if(!g.currentSession)return 0;let e=Object.keys(g.currentSession.answers);return 0===e.length?0:Math.round(e.filter(e=>{let t=g.currentSession.questions.find(t=>t.id===e);return t&&g.currentSession.answers[e]===t.correctAnswerId}).length/e.length*100)},updateTimer:e=>{g.currentSession&&console.log("Timer updated: ".concat(e," seconds remaining"))},timeUp:()=>{g.currentSession&&!g.currentSession.completed&&m({type:"FINISH_EXAM"})}},children:t})}function m(){let e=(0,l.useContext)(d);if(!e)throw Error("useExam must be used within an ExamProvider");return e}},56189:(e,t,r)=>{r.r(t),r.d(t,{Difficulty:()=>i,ExamMode:()=>a,QuestionCategory:()=>o,TCODomain:()=>n,TCO_DOMAIN_WEIGHTS:()=>s});let n={AQ:"Asking Questions",RQ:"Refining Questions & Targeting",TA:"Taking Action",NB:"Navigation and Basic Module Functions",RD:"Report Generation and Data Export",ASKING_QUESTIONS:"Asking Questions",REFINING_QUESTIONS:"Refining Questions",REFINING_TARGETING:"Refining Questions & Targeting",TAKING_ACTION:"Taking Action",NAVIGATION_MODULES:"Navigation and Basic Module Functions",NAVIGATION_BASIC_MODULE_FUNCTIONS:"Navigation and Basic Module Functions",REPORTING_EXPORT:"Report Generation and Data Export",REPORTING_DATA_EXPORT:"Report Generation and Data Export",SECURITY:"Security",FUNDAMENTALS:"Fundamentals",TROUBLESHOOTING:"Troubleshooting"},s={[n.ASKING_QUESTIONS]:22,[n.REFINING_QUESTIONS]:23,[n.REFINING_TARGETING]:23,[n.TAKING_ACTION]:15,[n.NAVIGATION_MODULES]:23,[n.REPORTING_EXPORT]:17,[n.SECURITY]:10,[n.FUNDAMENTALS]:15,[n.TROUBLESHOOTING]:12},o={PLATFORM_FUNDAMENTALS:"Platform Fundamentals",CONSOLE_PROCEDURES:"Console Procedures",TROUBLESHOOTING:"Troubleshooting",PRACTICAL_SCENARIOS:"Practical Scenarios",LINEAR_CHAIN:"Linear Chain Architecture"},i={BEGINNER:"Beginner",INTERMEDIATE:"Intermediate",ADVANCED:"Advanced",EXPERT:"Expert",beginner:"Beginner",intermediate:"Intermediate",advanced:"Advanced",expert:"Expert"};var a=function(e){return e.PRACTICE="practice",e.MOCK="mock",e.REVIEW="review",e}({})},60080:(e,t,r)=>{r.d(t,{z:()=>S});var n=r(95704);let s=n.env.NEXT_PUBLIC_POSTHOG_KEY||"",o="true"===(n.env.NEXT_PUBLIC_ANALYTICS_DEBUG||"").toLowerCase(),i=(n.env.NEXT_PUBLIC_POSTHOG_HOST||"https://us.i.posthog.com").replace(/\/$/,""),a="ph_distinct_id",c=null;function l(){return"undefined"!=typeof crypto&&crypto.randomUUID?crypto.randomUUID():Math.random().toString(36).slice(2)+Date.now().toString(36)}function u(){if(c)return c;try{let e=localStorage.getItem(a);if(e)return c=e;let t=l();return localStorage.setItem(a,t),c=t,t}catch(e){return c=l()}}async function d(e,t){if(!s)return;let r={api_key:s,event:e,properties:{distinct_id:u(),$current_url:function(){try{return window.location.href}catch(e){return}}(),...t},timestamp:function(){try{return new Date().toISOString()}catch(e){return""}}()},n="".concat(i,"/e/");try{var a;if(o&&console.debug("[analytics]",e,{...r.properties,timestamp:r.timestamp}),null==(a=navigator)?void 0:a.sendBeacon){let e=new Blob([JSON.stringify(r)],{type:"application/json"});navigator.sendBeacon(n,e)}else await fetch(n,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r),keepalive:!0})}catch(e){}}let S={init:()=>!!s,capture:(e,t)=>d(e,t),pageview:e=>d("$pageview",e?{path:e}:void 0),identify(e,t){if(e)return d("$identify",{distinct_id:u(),$user_id:e,...t})}}},64269:(e,t,r)=>{r.d(t,{J8:()=>i,cn:()=>o});var n=r(2821),s=r(75889);function o(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,s.QP)((0,n.$)(t))}function i(e){switch(e.toLowerCase()){case"beginner":return"text-green-600 dark:text-green-400";case"intermediate":return"text-yellow-600 dark:text-yellow-400";case"advanced":return"text-red-600 dark:text-red-400";default:return"text-gray-600 dark:text-gray-400"}}},71985:(e,t,r)=>{r.d(t,{I_:()=>o});var n=r(56189);let s=[n.Difficulty.BEGINNER,n.Difficulty.INTERMEDIATE,n.Difficulty.ADVANCED,n.Difficulty.EXPERT];function o(e){return s.reduce((t,r)=>(t[r]=e(r),t),{})}}}]);