"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5059],{52987:(e,s,t)=>{t.d(s,{A:()=>a});let a=(0,t(71847).A)("arrow-right",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]])},56154:(e,s,t)=>{t.d(s,{A:()=>a});let a=(0,t(71847).A)("zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]])},75059:(e,s,t)=>{t.r(s),t.d(s,{NaturalLanguageInput:()=>N});var a=t(95155),r=t(12115),l=t(65142),n=t(3998),c=t(11647),i=t(17037),x=t(86948),d=t(85710),m=t(37107),o=t(9602),u=t(56154),h=t(86651),p=t(35299),g=t(95740),y=t(52987),j=t(26983);function N(e){let{value:s,onChange:t,onSubmit:N,suggestions:v,isProcessing:b=!1,placeholder:f="Type a natural language query...",className:w=""}=e,[k,A]=(0,r.useState)(!1),[E,T]=(0,r.useState)(!1),[q,z]=(0,r.useState)(-1),[C,D]=(0,r.useState)(s),S=(0,r.useRef)(null),F=(0,r.useRef)(null);(0,r.useEffect)(()=>{D(s)},[s]),(0,r.useEffect)(()=>{T(v.length>0&&k&&!b)},[v,k,b]);let M=()=>{C.trim()&&!b&&(N(C.trim()),T(!1))},_=e=>{if(D(e.text),t(e.text),T(!1),z(-1),"complete"===e.type)setTimeout(()=>N(e.text),100);else{var s;null==(s=S.current)||s.focus()}};return(0,a.jsxs)("div",{className:"relative ".concat(w),children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:b?(0,a.jsx)(p.A,{className:"h-5 w-5 text-tanium-accent animate-spin"}):(0,a.jsx)(g.A,{className:"h-5 w-5 text-tanium-accent"})}),(0,a.jsx)(l.p,{ref:S,type:"text",value:C,onChange:e=>{let s=e.target.value;D(s),t(s),z(-1)},onKeyDown:e=>{"Enter"===e.key?(e.preventDefault(),q>=0&&q<v.length?_(v[q]):M()):"ArrowDown"===e.key?(e.preventDefault(),z(e=>e<v.length-1?e+1:e)):"ArrowUp"===e.key?(e.preventDefault(),z(e=>e>-1?e-1:-1)):"Escape"===e.key&&(T(!1),z(-1))},onFocus:()=>A(!0),onBlur:()=>{setTimeout(()=>A(!1),200)},placeholder:f,disabled:b,className:"pl-10 pr-24 bg-gray-800 border-gray-600 text-white placeholder-gray-400 focus:border-tanium-accent"}),(0,a.jsx)("div",{className:"absolute inset-y-0 right-0 flex items-center pr-2",children:(0,a.jsx)(n.$,{size:"sm",onClick:M,disabled:!C.trim()||b,className:"bg-tanium-accent hover:bg-blue-600",children:b?(0,a.jsx)(a.Fragment,{children:"Processing..."}):(0,a.jsxs)(a.Fragment,{children:["Generate",(0,a.jsx)(y.A,{className:"ml-1 h-3 w-3"})]})})})]}),E&&(0,a.jsx)(x.Zp,{ref:F,className:"absolute z-50 w-full mt-1 bg-gray-800 border-gray-600 shadow-lg",children:(0,a.jsx)(i.F,{className:"max-h-80",children:(0,a.jsxs)("div",{className:"p-1",children:[(0,a.jsx)("div",{className:"text-xs text-gray-400 px-3 py-1 mb-1",children:"Suggested queries"}),v.map((e,s)=>{var t;return(0,a.jsxs)("div",{className:"\n                    flex items-start space-x-3 px-3 py-2 cursor-pointer rounded\n                    ".concat(s===q?"bg-gray-700":"hover:bg-gray-700/50","\n                  "),onClick:()=>_(e),onMouseEnter:()=>z(s),children:[(0,a.jsx)("div",{className:"flex-shrink-0 mt-0.5",children:(e=>{switch(e){case"sensor":return(0,a.jsx)(d.A,{className:"h-4 w-4"});case"filter":return(0,a.jsx)(m.A,{className:"h-4 w-4"});case"template":return(0,a.jsx)(o.A,{className:"h-4 w-4"});case"complete":return(0,a.jsx)(u.A,{className:"h-4 w-4"});default:return(0,a.jsx)(h.A,{className:"h-4 w-4"})}})(e.type)}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsxs)("div",{className:"flex items-start justify-between",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("div",{className:"text-sm text-white",children:e.displayText}),e.description&&(0,a.jsx)("div",{className:"text-xs text-gray-400 mt-0.5",children:e.description})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2 ml-2",children:[void 0!==e.runtime&&(0,a.jsxs)(c.E,{variant:"outline",className:"text-xs ".concat(e.runtime<100?"border-green-500 text-green-400":e.runtime<500?"border-yellow-500 text-yellow-400":"border-red-500 text-red-400"),children:[(0,a.jsx)(j.A,{className:"h-3 w-3 mr-1"}),e.runtime,"ms"]}),(0,a.jsxs)(c.E,{variant:"outline",className:"text-xs ".concat((t=e.confidence)>=.8?"text-green-400":t>=.5?"text-yellow-400":"text-gray-400"),children:[Math.round(100*e.confidence),"%"]})]})]}),e.text!==e.displayText&&(0,a.jsx)("div",{className:"mt-1",children:(0,a.jsx)("code",{className:"text-xs text-gray-500",children:e.text.length>80?e.text.substring(0,80)+"...":e.text})})]})]},e.id)}),(0,a.jsx)("div",{className:"border-t border-gray-700 mt-1 pt-1",children:(0,a.jsxs)("div",{className:"px-3 py-1 text-xs text-gray-500",children:["Press ",(0,a.jsx)("kbd",{className:"px-1 py-0.5 bg-gray-700 rounded",children:"↑"})," ",(0,a.jsx)("kbd",{className:"px-1 py-0.5 bg-gray-700 rounded",children:"↓"})," to navigate,"," ",(0,a.jsx)("kbd",{className:"px-1 py-0.5 bg-gray-700 rounded",children:"Enter"})," to select,"," ",(0,a.jsx)("kbd",{className:"px-1 py-0.5 bg-gray-700 rounded",children:"Esc"})," to close"]})})]})})}),!b&&!E&&C&&(0,a.jsx)("div",{className:"absolute mt-1 text-xs text-gray-500",children:"Press Enter or click Generate to convert to Tanium query"})]})}}}]);