"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8383],{64057:(e,s,r)=>{r.d(s,{V:()=>S,p:()=>p});var t=r(95155),o=r(65380),n=r(66013),a=r(56189),i=r(12115);let c={totalQuestions:0,correctAnswers:0,sessionCount:0,studyStreak:0,lastStudyDate:null,hoursStudied:0,averageScore:0,examReadiness:"Poor",domainScores:{[a.TCODomain.ASKING_QUESTIONS]:{score:0,questionsAnswered:0,correctAnswers:0,timeSpent:0},[a.TCODomain.REFINING_QUESTIONS]:{score:0,questionsAnswered:0,correctAnswers:0,timeSpent:0},[a.TCODomain.REFINING_TARGETING]:{score:0,questionsAnswered:0,correctAnswers:0,timeSpent:0},[a.TCODomain.TAKING_ACTION]:{score:0,questionsAnswered:0,correctAnswers:0,timeSpent:0},[a.TCODomain.NAVIGATION_MODULES]:{score:0,questionsAnswered:0,correctAnswers:0,timeSpent:0},[a.TCODomain.REPORTING_EXPORT]:{score:0,questionsAnswered:0,correctAnswers:0,timeSpent:0},[a.TCODomain.SECURITY]:{score:0,questionsAnswered:0,correctAnswers:0,timeSpent:0},[a.TCODomain.FUNDAMENTALS]:{score:0,questionsAnswered:0,correctAnswers:0,timeSpent:0},[a.TCODomain.TROUBLESHOOTING]:{score:0,questionsAnswered:0,correctAnswers:0,timeSpent:0}},achievements:[],weeklyGoal:5,weeklyProgress:0,timeSpent:0,moduleProgress:{},assessmentScores:{},streak:0,recentSessions:[]},l={progress:c,isLoading:!1,error:null};function u(e,s){switch(s.type){case"LOAD_PROGRESS":return{...e,progress:s.payload,isLoading:!1};case"UPDATE_SESSION_STATS":{let{score:r,questionsCount:t,timeSpent:o,domain:n}=s.payload,a=e.progress.totalQuestions+t,i=e.progress.correctAnswers+Math.round(r/100*t),c=Math.round(i/a*100),l=e.progress.hoursStudied+o/3600,u="Poor";c>=85?u="Excellent":c>=75?u="Good":c>=60&&(u="Fair");let d={...e.progress,totalQuestions:a,correctAnswers:i,sessionCount:e.progress.sessionCount+1,hoursStudied:l,averageScore:c,examReadiness:u,weeklyProgress:e.progress.weeklyProgress+1};if(n){let s=e.progress.domainScores[n],a=Math.round(r/100*t),i=s.questionsAnswered+t,c=s.correctAnswers+a,l=Math.round(c/i*100);d.domainScores[n]={score:l,questionsAnswered:i,correctAnswers:c,timeSpent:s.timeSpent+o}}return d.recentSessions=[{domain:n,score:r,questions:t,time:o,at:new Date().toISOString()},...e.progress.recentSessions||[]].slice(0,10),{...e,progress:d}}case"UPDATE_STUDY_STREAK":{let s=new Date().toISOString().split("T")[0],r=new Date(Date.now()-864e5).toISOString().split("T")[0],{lastStudyDate:t}=e.progress,o=e.progress.studyStreak;return t===r?o+=1:t!==s&&(o=1),{...e,progress:{...e.progress,studyStreak:o,lastStudyDate:s}}}case"SET_WEEKLY_GOAL":return{...e,progress:{...e.progress,weeklyGoal:s.payload}};case"ADD_ACHIEVEMENT":{let r=[...e.progress.achievements];return r.includes(s.payload)||r.push(s.payload),{...e,progress:{...e.progress,achievements:r}}}case"SET_LOADING":return{...e,isLoading:s.payload};case"SET_ERROR":return{...e,error:s.payload,isLoading:!1};case"RESET_PROGRESS":return{...l,progress:{...c}};default:return e}}let d=(0,i.createContext)(void 0);function S(e){let{children:s}=e,[r,a]=(0,i.useReducer)(u,l),{user:S}=(0,o.A)(),p=(0,n.t)(),g=(0,i.useRef)(null);(0,i.useEffect)(()=>{let e=()=>{let e=localStorage.getItem("tco-progress");if(e)try{let s=JSON.parse(e);a({type:"LOAD_PROGRESS",payload:s})}catch(e){console.error("Failed to load progress from localStorage:",e),a({type:"LOAD_PROGRESS",payload:c})}else a({type:"LOAD_PROGRESS",payload:c})};(async()=>{if(S)try{a({type:"LOAD_PROGRESS",payload:c})}catch(s){console.error("Failed to load progress from database:",s),e()}else e()})()},[null==S?void 0:S.id]);let y=(0,i.useCallback)(async e=>{if(!r.isLoading&&e.totalQuestions>0){let s=JSON.stringify(e);if(g.current!==s)if(g.current=s,S)try{for(let[s,r]of Object.entries(e.domainScores))r.questionsAnswered>0&&await p.upsertUserStatistics({category:s,total_questions:r.questionsAnswered,correct_answers:r.correctAnswers,accuracy_rate:r.score,average_time:r.questionsAnswered>0?r.timeSpent/r.questionsAnswered:0})}catch(e){console.error("Failed to save progress to database:",e),localStorage.setItem("tco-progress",s)}else localStorage.setItem("tco-progress",s)}},[null==S?void 0:S.id,p]);(0,i.useEffect)(()=>{y(r.progress)},[r.progress.totalQuestions,r.progress.correctAnswers,r.progress.sessionCount,r.progress.studyStreak,r.progress.hoursStudied,r.progress.averageScore,r.progress.weeklyProgress,r.progress.achievements.length]);let A=(0,i.useCallback)(()=>({totalQuestions:r.progress.totalQuestions,averageScore:r.progress.averageScore,studyStreak:r.progress.studyStreak,hoursStudied:Math.round(10*r.progress.hoursStudied)/10,readinessLevel:r.progress.examReadiness}),[r.progress.totalQuestions,r.progress.averageScore,r.progress.studyStreak,r.progress.hoursStudied,r.progress.examReadiness]),E=(0,i.useCallback)(()=>Object.entries(r.progress.domainScores).map(e=>{let[s,r]=e;return{domain:s,score:r.score,questionsAnswered:r.questionsAnswered,correctAnswers:r.correctAnswers,timeSpent:r.timeSpent,percentage:r.questionsAnswered>0?Math.round(r.correctAnswers/r.questionsAnswered*100):0}}),[r.progress.domainScores]),T=(0,i.useCallback)(()=>({current:r.progress.weeklyProgress,goal:r.progress.weeklyGoal,percentage:Math.round(r.progress.weeklyProgress/r.progress.weeklyGoal*100)}),[r.progress.weeklyProgress,r.progress.weeklyGoal]);return(0,t.jsx)(d.Provider,{value:{state:r,updateSessionStats:(e,s,t,o)=>{a({type:"UPDATE_SESSION_STATS",payload:{score:e,questionsCount:s,timeSpent:t,domain:o}}),a({type:"UPDATE_STUDY_STREAK"}),100===e&&a({type:"ADD_ACHIEVEMENT",payload:"Perfect Score"}),r.progress.studyStreak>=7&&a({type:"ADD_ACHIEVEMENT",payload:"Week Warrior"}),r.progress.totalQuestions>=100&&a({type:"ADD_ACHIEVEMENT",payload:"Centurion"})},setWeeklyGoal:e=>{a({type:"SET_WEEKLY_GOAL",payload:e})},getOverallStats:A,getDomainStats:E,getWeeklyProgress:T,resetProgress:()=>{localStorage.removeItem("tco-progress"),g.current=null,a({type:"RESET_PROGRESS"})}},children:s})}function p(){let e=(0,i.useContext)(d);if(void 0===e)throw Error("useProgress must be used within a ProgressProvider");return e}},79367:(e,s,r)=>{r.d(s,{Z:()=>d,t:()=>S});var t=r(95155),o=r(65380),n=r(66013),a=r(12115);let i={theme:"dark",soundEnabled:!0,notifications:!0,practiceMode:"adaptive",showExplanations:!0,timerVisible:!0,autoAdvance:!1,studyReminders:!0,examSimulation:!0,strictTiming:!1,randomizeQuestions:!0,randomizeAnswers:!0,trackProgress:!0,shareAnonymous:!1,detailedStats:!0,highContrast:!1,largeText:!1,screenReader:!1,keyboardNav:!0,language:"en",timeZone:Intl.DateTimeFormat().resolvedOptions().timeZone,sessionTimeout:30,questionsPerSession:20,difficultyProgression:!0,pauseOnIncorrect:!1},c={settings:i,isLoading:!1,error:null};function l(e,s){switch(s.type){case"LOAD_SETTINGS":return{...e,settings:s.payload,isLoading:!1,error:null};case"UPDATE_SETTING":return{...e,settings:{...e.settings,[s.payload.key]:s.payload.value}};case"UPDATE_SETTINGS":return{...e,settings:{...e.settings,...s.payload}};case"RESET_SETTINGS":return{...e,settings:{...i}};case"SET_LOADING":return{...e,isLoading:s.payload};case"SET_ERROR":return{...e,error:s.payload,isLoading:!1};default:return e}}let u=(0,a.createContext)(void 0);function d(e){let{children:s}=e,[r,d]=(0,a.useReducer)(l,c),{user:S}=(0,o.A)(),p=(0,n.t)(),g=(0,a.useRef)(!1),y=(0,a.useRef)();(0,a.useEffect)(()=>{(async()=>{d({type:"SET_LOADING",payload:!0});let e=localStorage.getItem("tco-settings");if(e)try{let s=JSON.parse(e),r={...i,...s};d({type:"LOAD_SETTINGS",payload:r})}catch(e){console.error("Failed to load settings from localStorage:",e),d({type:"LOAD_SETTINGS",payload:i})}else d({type:"LOAD_SETTINGS",payload:i});d({type:"SET_LOADING",payload:!1}),g.current=!0})()},[null==S?void 0:S.id]),(0,a.useEffect)(()=>{!r.isLoading&&g.current&&(y.current&&clearTimeout(y.current),y.current=setTimeout(()=>{localStorage.setItem("tco-settings",JSON.stringify(r.settings))},300))},[r.settings,r.isLoading]);let A=(0,a.useCallback)(async()=>{localStorage.removeItem("tco-settings"),d({type:"RESET_SETTINGS"})},[null==S?void 0:S.id,p]);return(0,t.jsx)(u.Provider,{value:{state:r,updateSetting:(e,s)=>{d({type:"UPDATE_SETTING",payload:{key:e,value:s}})},updateSettings:e=>{d({type:"UPDATE_SETTINGS",payload:e})},resetSettings:A,getSetting:e=>r.settings[e],exportSettings:()=>({...r.settings}),importSettings:e=>{d({type:"LOAD_SETTINGS",payload:e})}},children:s})}function S(){let e=(0,a.useContext)(u);if(void 0===e)throw Error("useSettings must be used within a SettingsProvider");return e}}}]);