"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3283],{3998:(e,t,r)=>{r.d(t,{$:()=>u});var n=r(95155),a=r(12115),l=r(32467),o=r(83101),i=r(64269);let s=(0,o.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all duration-200 ease-out focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-cyan-400/50 focus-visible:shadow-[0_0_20px_rgba(34,211,238,0.15)] disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-cyan-600 text-white shadow-[0_0_20px_rgba(34,211,238,0.1)] hover:bg-cyan-500 hover:shadow-[0_0_30px_rgba(34,211,238,0.15)] hover:scale-105 border border-cyan-500/50",destructive:"bg-red-600 text-white shadow-[0_0_20px_rgba(239,68,68,0.1)] hover:bg-red-500 hover:shadow-[0_0_30px_rgba(239,68,68,0.15)] border border-red-500/50",outline:"border border-cyan-500/30 bg-black/20 backdrop-blur-xl text-cyan-100 shadow-[0_0_20px_rgba(34,211,238,0.05)] hover:bg-cyan-500/10 hover:text-cyan-400 hover:shadow-[0_0_30px_rgba(34,211,238,0.1)]",secondary:"bg-slate-600 text-slate-100 shadow-[0_0_20px_rgba(71,85,105,0.1)] hover:bg-slate-500 hover:shadow-[0_0_30px_rgba(71,85,105,0.15)] border border-slate-500/50",ghost:"text-cyan-100 hover:bg-cyan-500/10 hover:text-cyan-400",link:"text-cyan-400 underline-offset-4 hover:underline hover:text-cyan-300"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),u=a.forwardRef((e,t)=>{let{className:r,variant:a,size:o,asChild:u=!1,...d}=e,c=u?l.DX:"button";return(0,n.jsx)(c,{className:(0,i.cn)(s({variant:a,size:o,className:r})),ref:t,...d})});u.displayName="Button"},6521:(e,t,r)=>{r.r(t),r.d(t,{buildNote:()=>i,deleteNote:()=>h,mergeByNewest:()=>s,notesRemote:()=>u,notesService:()=>p,notesStorage:()=>o,rateNote:()=>g,saveQuickNote:()=>c,syncNotes:()=>d,updateNote:()=>f});var n=r(62890),a=r(27233);let l="tco_notes_v1",o={get(){try{let e=localStorage.getItem(l);if(!e)return[];let t=JSON.parse(e);return Array.isArray(t)?t:[]}catch(e){return[]}},set(e){localStorage.setItem(l,JSON.stringify(e))},add(e){let t=o.get();o.set([e,...t])},remove(e){let t=o.get();o.set(t.filter(t=>t.id!==e))},upsert(e){let t=o.get(),r=t.findIndex(t=>t.id===e.id);r>=0?t[r]=e:t.unshift(e),o.set(t)}};function i(e){var t,r;let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],l=arguments.length>2?arguments[2]:void 0,o="undefined"!=typeof crypto&&"function"==typeof crypto.randomUUID?crypto.randomUUID():Math.random().toString(36).slice(2)+Date.now().toString(36),i=new Date().toISOString();return{id:o,text:e.trim(),tags:n,createdAt:i,updatedAt:i,srs:(0,a.Ur)(o),moduleId:null!=(t=null==l?void 0:l.moduleId)?t:null,sectionId:null!=(r=null==l?void 0:l.sectionId)?r:null}}function s(e,t){let r=new Map;for(let n of[...e,...t]){let e=r.get(n.id);(!e||e.updatedAt<n.updatedAt)&&r.set(n.id,n)}return[...r.values()].sort((e,t)=>e.updatedAt<t.updatedAt?1:-1)}let u={async list(e){let{data:t,error:r}=await n.N.from("notes").select("id, user_id, text, tags, srs, created_at, updated_at, module_id, section_id").eq("user_id",e).order("updated_at",{ascending:!1});if(r)throw r;return(t||[]).map(e=>{var t,r;return{id:e.id,userId:e.user_id,text:e.text,tags:Array.isArray(e.tags)?e.tags:e.tags||[],srs:e.srs||(0,a.Ur)(e.id),createdAt:e.created_at,updatedAt:e.updated_at,moduleId:null!=(t=e.module_id)?t:null,sectionId:null!=(r=e.section_id)?r:null}})},async upsert(e,t){let r=Array.isArray(t)?t:[t];if(0===r.length)return;let a=r.map(t=>{var r,n;return{id:t.id,user_id:e,text:t.text,tags:t.tags,srs:t.srs,created_at:t.createdAt,updated_at:t.updatedAt,module_id:null!=(r=t.moduleId)?r:null,section_id:null!=(n=t.sectionId)?n:null}}),{error:l}=await n.N.from("notes").upsert(a,{onConflict:"id"});if(l)throw l},async remove(e,t){let{error:r}=await n.N.from("notes").delete().eq("user_id",e).eq("id",t);if(r)throw r}};async function d(e){let t=o.get();if(!(null==e?void 0:e.id))return t;try{let r=await u.list(e.id);if(0===r.length&&t.length>0)return await u.upsert(e.id,t),t;if(r.length>0&&0===t.length)return o.set(r),r;let n=s(t,r);return await u.upsert(e.id,n),o.set(n),n}catch(e){return t}}async function c(e,t){var r;let n=i(e,(null==t?void 0:t.tags)||[],{moduleId:null==t?void 0:t.moduleId,sectionId:null==t?void 0:t.sectionId});if(o.add(n),null==t||null==(r=t.user)?void 0:r.id)try{await u.upsert(t.user.id,n)}catch(e){}return n}async function g(e,t,r){let n={...e,srs:(0,a._)(e.srs,t),updatedAt:new Date().toISOString()};if(o.upsert(n),null==r?void 0:r.id)try{await u.upsert(r.id,n)}catch(e){}return n}async function f(e,t){let r={...e,updatedAt:new Date().toISOString()};if(o.upsert(r),null==t?void 0:t.id)try{await u.upsert(t.id,r)}catch(e){}return r}async function h(e,t){if(o.remove(e),null==t?void 0:t.id)try{await u.remove(t.id,e)}catch(e){}}let p={STORAGE_KEY:l,buildNote:i,syncNotes:d,saveQuickNote:c,rateNote:g,updateNote:f,deleteNote:h,getLocal:o.get,setLocal:o.set}},27233:(e,t,r)=>{function n(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Date;return{id:e,due:t.getTime(),interval:0,ease:2.5,reps:0,lapses:0}}function a(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Date;return e.due<=t.getTime()}function l(e){return new Date(e.due)}function o(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Date,n=e.ease,a=e.interval,l=e.reps,o=e.lapses;switch(t){case"again":l=0,o+=1,n=Math.max(1.3,n-.2),a=1;break;case"hard":n=Math.max(1.3,n-.15),a=l<=0?1:Math.max(1,Math.round(1.2*a)),l=Math.max(1,l);break;case"good":a=0===l?1:1===l?6:Math.max(1,Math.round(a*n)),l+=1;break;case"easy":n=Math.max(1.3,n+.15),a=0===l?3:1===l?7:Math.max(1,Math.round(a*n*1.3)),l+=1}let i=r.getTime()+864e5*a;return{...e,ease:n,interval:a,reps:l,lapses:o,due:i}}function i(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Date,r=t.getTime();return e.filter(e=>e.due<=r).sort((e,t)=>e.due-t.due)}r.d(t,{Ur:()=>n,_:()=>o,m3:()=>l,nZ:()=>a,q5:()=>i})},32467:(e,t,r)=>{r.d(t,{DX:()=>i,Dc:()=>u,TL:()=>o});var n=r(12115),a=r(94446),l=r(95155);function o(e){let t=function(e){let t=n.forwardRef((e,t)=>{let{children:r,...l}=e;if(n.isValidElement(r)){var o;let e,i,s=(o=r,(i=(e=Object.getOwnPropertyDescriptor(o.props,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning)?o.ref:(i=(e=Object.getOwnPropertyDescriptor(o,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning)?o.props.ref:o.props.ref||o.ref),u=function(e,t){let r={...t};for(let n in t){let a=e[n],l=t[n];/^on[A-Z]/.test(n)?a&&l?r[n]=(...e)=>{let t=l(...e);return a(...e),t}:a&&(r[n]=a):"style"===n?r[n]={...a,...l}:"className"===n&&(r[n]=[a,l].filter(Boolean).join(" "))}return{...e,...r}}(l,r.props);return r.type!==n.Fragment&&(u.ref=t?(0,a.t)(t,s):s),n.cloneElement(r,u)}return n.Children.count(r)>1?n.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}(e),r=n.forwardRef((e,r)=>{let{children:a,...o}=e,i=n.Children.toArray(a),s=i.find(d);if(s){let e=s.props.children,a=i.map(t=>t!==s?t:n.Children.count(e)>1?n.Children.only(null):n.isValidElement(e)?e.props.children:null);return(0,l.jsx)(t,{...o,ref:r,children:n.isValidElement(e)?n.cloneElement(e,void 0,a):null})}return(0,l.jsx)(t,{...o,ref:r,children:a})});return r.displayName=`${e}.Slot`,r}var i=o("Slot"),s=Symbol("radix.slottable");function u(e){let t=({children:e})=>(0,l.jsx)(l.Fragment,{children:e});return t.displayName=`${e}.Slottable`,t.__radixId=s,t}function d(e){return n.isValidElement(e)&&"function"==typeof e.type&&"__radixId"in e.type&&e.type.__radixId===s}},62890:(e,t,r)=>{r.d(t,{N:()=>i});var n=r(65040),a=r(95704);let l="https://qnwcwoutgarhqxlgsjzs.supabase.co",o="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InFud2N3b3V0Z2FyaHF4bGdzanpzIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTY2NzM0MjgsImV4cCI6MjA3MjI0OTQyOH0.nooeC4pyNsoRok5zKat9iwUk9rgCfz_b5SWqZ7_dgtQ";if(!l)throw Error("NEXT_PUBLIC_SUPABASE_URL is required. Check your .env.local file.");if(!o)throw Error("NEXT_PUBLIC_SUPABASE_ANON_KEY is required. Check your .env.local file.");let i=(0,n.UU)(l||"",o||"");a.env.SUPABASE_SERVICE_ROLE_KEY&&(0,n.UU)(l||"",a.env.SUPABASE_SERVICE_ROLE_KEY,{auth:{autoRefreshToken:!1,persistSession:!1}})},64269:(e,t,r)=>{r.d(t,{J8:()=>o,cn:()=>l});var n=r(2821),a=r(75889);function l(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,a.QP)((0,n.$)(t))}function o(e){switch(e.toLowerCase()){case"beginner":return"text-green-600 dark:text-green-400";case"intermediate":return"text-yellow-600 dark:text-yellow-400";case"advanced":return"text-red-600 dark:text-red-400";default:return"text-gray-600 dark:text-gray-400"}}},65380:(e,t,r)=>{r.d(t,{A:()=>i,O:()=>s});var n=r(95155),a=r(62890),l=r(12115);let o=(0,l.createContext)(void 0);function i(){let e=(0,l.useContext)(o);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}function s(e){let{children:t}=e,[r,i]=(0,l.useState)({user:null,session:null,loading:!0,error:null});(0,l.useEffect)(()=>{(async()=>{try{let{data:{session:e},error:t}=await a.N.auth.getSession();if(t){console.error("Error getting initial session:",t),i(e=>({...e,error:t,loading:!1}));return}i(t=>{var r;return{...t,session:e,user:null!=(r=null==e?void 0:e.user)?r:null,loading:!1,error:null}})}catch(e){console.error("Unexpected error getting session:",e),i(t=>({...t,loading:!1,error:e}))}})();let{data:{subscription:e}}=a.N.auth.onAuthStateChange(async(e,t)=>{var r;console.log("Auth state changed:",e,null==t||null==(r=t.user)?void 0:r.id),i(e=>{var r;return{...e,session:t,user:null!=(r=null==t?void 0:t.user)?r:null,loading:!1,error:null}}),"SIGNED_IN"===e&&(null==t?void 0:t.user)||"SIGNED_OUT"===e&&(localStorage.removeItem("tco-progress"),localStorage.removeItem("tco-exam-session"),localStorage.removeItem("tco-incorrect-answers"),localStorage.removeItem("tco-settings"),localStorage.removeItem("tco-search-history"))});return()=>{e.unsubscribe()}},[]);let s=async(e,t)=>{i(e=>({...e,loading:!0,error:null}));try{let{error:r}=await a.N.auth.signInWithPassword({email:e,password:t});return r&&i(e=>({...e,error:r,loading:!1})),{error:r}}catch(e){return i(t=>({...t,error:e,loading:!1})),{error:e}}},u=async(e,t,r)=>{i(e=>({...e,loading:!0,error:null}));try{let{error:n}=await a.N.auth.signUp({email:e,password:t,options:{data:{first_name:(null==r?void 0:r.firstName)||"",last_name:(null==r?void 0:r.lastName)||""}}});return n&&i(e=>({...e,error:n,loading:!1})),{error:n}}catch(e){return i(t=>({...t,error:e,loading:!1})),{error:e}}},d=async()=>{i(e=>({...e,loading:!0,error:null}));try{let{error:e}=await a.N.auth.signOut();return e&&i(t=>({...t,error:e,loading:!1})),{error:e}}catch(e){return i(t=>({...t,error:e,loading:!1})),{error:e}}},c=async e=>{try{let{error:t}=await a.N.auth.resetPasswordForEmail(e,{redirectTo:"".concat(window.location.origin).concat("","/auth/reset-password")});return{error:t}}catch(e){return{error:e}}},g=async e=>{if(!r.user)return{error:{message:"No user logged in"}};try{let{error:t}=await a.N.auth.updateUser({data:{first_name:e.firstName,last_name:e.lastName}});if(t)return{error:t};return{error:null}}catch(e){return{error:e}}},f={...r,signIn:s,signUp:u,signOut:d,resetPassword:c,updateProfile:g};return(0,n.jsx)(o.Provider,{value:f,children:t})}},83101:(e,t,r)=>{r.d(t,{F:()=>o});var n=r(2821);let a=e=>"boolean"==typeof e?`${e}`:0===e?"0":e,l=n.$,o=(e,t)=>r=>{var n;if((null==t?void 0:t.variants)==null)return l(e,null==r?void 0:r.class,null==r?void 0:r.className);let{variants:o,defaultVariants:i}=t,s=Object.keys(o).map(e=>{let t=null==r?void 0:r[e],n=null==i?void 0:i[e];if(null===t)return null;let l=a(t)||a(n);return o[e][l]}),u=r&&Object.entries(r).reduce((e,t)=>{let[r,n]=t;return void 0===n||(e[r]=n),e},{});return l(e,s,null==t||null==(n=t.compoundVariants)?void 0:n.reduce((e,t)=>{let{class:r,className:n,...a}=t;return Object.entries(a).every(e=>{let[t,r]=e;return Array.isArray(r)?r.includes({...i,...u}[t]):({...i,...u})[t]===r})?[...e,r,n]:e},[]),null==r?void 0:r.class,null==r?void 0:r.className)}},94446:(e,t,r)=>{r.d(t,{s:()=>o,t:()=>l});var n=r(12115);function a(e,t){if("function"==typeof e)return e(t);null!=e&&(e.current=t)}function l(...e){return t=>{let r=!1,n=e.map(e=>{let n=a(e,t);return r||"function"!=typeof n||(r=!0),n});if(r)return()=>{for(let t=0;t<n.length;t++){let r=n[t];"function"==typeof r?r():a(e[t],null)}}}}function o(...e){return n.useCallback(l(...e),e)}}}]);