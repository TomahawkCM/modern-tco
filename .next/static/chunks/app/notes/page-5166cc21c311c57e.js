(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9568],{3468:(e,t,a)=>{"use strict";a.d(t,{A:()=>i,q:()=>n});var r=a(12115),s=a(95155);function n(e,t){let a=r.createContext(t),n=e=>{let{children:t,...n}=e,i=r.useMemo(()=>n,Object.values(n));return(0,s.jsx)(a.Provider,{value:i,children:t})};return n.displayName=e+"Provider",[n,function(s){let n=r.useContext(a);if(n)return n;if(void 0!==t)return t;throw Error(`\`${s}\` must be used within \`${e}\``)}]}function i(e,t=[]){let a=[],n=()=>{let t=a.map(e=>r.createContext(e));return function(a){let s=a?.[e]||t;return r.useMemo(()=>({[`__scope${e}`]:{...a,[e]:s}}),[a,s])}};return n.scopeName=e,[function(t,n){let i=r.createContext(n),l=a.length;a=[...a,n];let d=t=>{let{scope:a,children:n,...d}=t,o=a?.[e]?.[l]||i,c=r.useMemo(()=>d,Object.values(d));return(0,s.jsx)(o.Provider,{value:c,children:n})};return d.displayName=t+"Provider",[d,function(a,s){let d=s?.[e]?.[l]||i,o=r.useContext(d);if(o)return o;if(void 0!==n)return n;throw Error(`\`${a}\` must be used within \`${t}\``)}]},function(...e){let t=e[0];if(1===e.length)return t;let a=()=>{let a=e.map(e=>({useScope:e(),scopeName:e.scopeName}));return function(e){let s=a.reduce((t,{useScope:a,scopeName:r})=>{let s=a(e)[`__scope${r}`];return{...t,...s}},{});return r.useMemo(()=>({[`__scope${t.scopeName}`]:s}),[s])}};return a.scopeName=t.scopeName,a}(n,...t)]}},10489:(e,t,a)=>{"use strict";a.d(t,{b:()=>l});var r=a(12115),s=a(97602),n=a(95155),i=r.forwardRef((e,t)=>(0,n.jsx)(s.sG.label,{...e,ref:t,onMouseDown:t=>{var a;t.target.closest("button, input, select, textarea")||(null==(a=e.onMouseDown)||a.call(e,t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));i.displayName="Label";var l=i},11186:(e,t,a)=>{"use strict";a.d(t,{Select:()=>d,SelectContent:()=>f,SelectItem:()=>p,SelectTrigger:()=>c,SelectValue:()=>o});var r=a(95155),s=a(12115),n=a(47887),i=a(64269),l=a(31719);let d=n.bL;n.YJ;let o=n.WT,c=s.forwardRef((e,t)=>{let{className:a,children:s,...d}=e;return(0,r.jsxs)(n.l9,{ref:t,className:(0,i.cn)("flex h-9 w-full items-center justify-between whitespace-nowrap rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm ring-offset-background focus:outline-none focus:ring-1 focus:ring-ring disabled:cursor-not-allowed disabled:opacity-50 data-[placeholder]:text-muted-foreground [&>span]:line-clamp-1",a),...d,children:[s,(0,r.jsx)(n.In,{asChild:!0,children:(0,r.jsx)(l.D3D,{className:"h-4 w-4 opacity-50"})})]})});c.displayName=n.l9.displayName;let u=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(n.PP,{ref:t,className:(0,i.cn)("flex cursor-default items-center justify-center py-1",a),...s,children:(0,r.jsx)(l.Mtm,{className:"h-4 w-4"})})});u.displayName=n.PP.displayName;let m=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(n.wn,{ref:t,className:(0,i.cn)("flex cursor-default items-center justify-center py-1",a),...s,children:(0,r.jsx)(l.D3D,{className:"h-4 w-4"})})});m.displayName=n.wn.displayName;let f=s.forwardRef((e,t)=>{let{className:a,children:s,position:l="popper",...d}=e;return(0,r.jsx)(n.ZL,{children:(0,r.jsxs)(n.UC,{ref:t,className:(0,i.cn)("relative z-50 max-h-[--radix-select-content-available-height] min-w-[8rem] origin-[--radix-select-content-transform-origin] overflow-y-auto overflow-x-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===l&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",a),position:l,...d,children:[(0,r.jsx)(u,{}),(0,r.jsx)(n.LM,{className:(0,i.cn)("p-1","popper"===l&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:s}),(0,r.jsx)(m,{})]})})});f.displayName=n.UC.displayName,s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(n.JU,{ref:t,className:(0,i.cn)("px-2 py-1.5 text-sm font-semibold",a),...s})}).displayName=n.JU.displayName;let p=s.forwardRef((e,t)=>{let{className:a,children:s,...d}=e;return(0,r.jsxs)(n.q7,{ref:t,className:(0,i.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-2 pr-8 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),...d,children:[(0,r.jsx)("span",{className:"absolute right-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,r.jsx)(n.VF,{children:(0,r.jsx)(l.Srz,{className:"h-4 w-4"})})}),(0,r.jsx)(n.p4,{children:s})]})});p.displayName=n.q7.displayName,s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(n.wv,{ref:t,className:(0,i.cn)("-mx-1 my-1 h-px bg-muted",a),...s})}).displayName=n.wv.displayName},18385:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>g});var r=a(95155),s=a(12115),n=a(86948),i=a(3998),l=a(65142),d=a(31120),o=a(27233),c=a(65380),u=a(62890),m=a(76444),f=a(11186),p=a(6521),x=a(60080);function h(e){let t=new Date,a=e.getTime()-t.getTime(),r=Math.abs(a),s=Math.round(r/6e4),n=Math.round(r/36e5),i=Math.round(r/864e5);return 6e4>Math.abs(a)?a>=0?"in < 1 min":"due now":r<36e5?a>=0?"in ".concat(s," min"):"".concat(s," min overdue"):r<864e5?a>=0?"in ".concat(n," h"):"".concat(n," h overdue"):a>=0?"in ".concat(i," d"):"".concat(i," d overdue")}function g(){let[e,t]=(0,s.useState)([]),[g,v]=(0,s.useState)(""),[y,N]=(0,s.useState)(""),b="__unassigned__",[j,w]=(0,s.useState)(b),[_,S]=(0,s.useState)(null),{user:C}=(0,c.A)(),[k,R]=(0,s.useState)([]),[T,$]=(0,s.useState)({});(0,s.useEffect)(()=>{let e=!0;return(async()=>{let a=await (0,p.syncNotes)(C);e&&t(a)})(),()=>{e=!1}},[null==C?void 0:C.id]),(0,s.useEffect)(()=>{let e=!0;return(async()=>{if(!(null==C?void 0:C.id)){R([]),$({});return}try{let[{data:t},{data:a}]=await Promise.all([u.N.from("study_sections").select("id,title,module_id").order("title",{ascending:!0}),u.N.from("study_modules").select("id,title").order("title",{ascending:!0})]);if(!e)return;let r={};for(let e of a||[])r[e.id]=e.title;$(r),R((t||[]).map(e=>({id:e.id,title:e.title,module_id:e.module_id})))}catch(e){}})(),()=>{e=!1}},[null==C?void 0:C.id]);let M=(0,s.useMemo)(()=>(0,o.q5)(e.map(e=>e.srs)),[e]),P=(0,s.useMemo)(()=>{if(0===M.length)return null;let t=M[0];return e.find(e=>e.id===t.id)||null},[M,e]);async function I(){var r,s;let n=g.trim();if(!n)return;let i=y.split(",").map(e=>e.trim()).filter(Boolean),l=j===b?null:k.find(e=>e.id===j)||null,d=null!=(r=null==l?void 0:l.module_id)?r:null,o=null!=(s=null==l?void 0:l.id)?s:null;if(_){let a=e.find(e=>e.id===_);if(a){let e=await (0,p.updateNote)({...a,text:n,tags:i,moduleId:d,sectionId:o},C);t(t=>t.map(t=>t.id===_?e:t))}S(null)}else{let r=p.notesService.buildNote(n,i,{moduleId:d,sectionId:o});if(p.notesService.setLocal([r,...e]),t(e=>[r,...e]),x.z.capture("note_add",{tags:r.tags,hasSection:!!r.sectionId}),null==C?void 0:C.id)try{await (await Promise.resolve().then(a.bind(a,6521))).notesRemote.upsert(C.id,r)}catch(e){}}v(""),N(""),w(b)}async function E(e){t(t=>t.filter(t=>t.id!==e)),await (0,p.deleteNote)(e,C),_===e&&(S(null),v(""),N(""))}async function D(e,a){let r=await (0,p.rateNote)(e,a,C);t(t=>t.map(t=>t.id===e.id?r:t))}let O=(0,s.useMemo)(()=>[...e].sort((e,t)=>e.updatedAt<t.updatedAt?1:-1),[e]),U=(0,s.useMemo)(()=>{let e=new Map;for(let t of k)e.set(t.id,t);return e},[k]),B=(0,s.useMemo)(()=>{let e={};for(let t of O){let a=t.sectionId||"__unassigned__";e[a]||(e[a]=[]),e[a].push(t)}return Object.entries(e).map(e=>{let[t,a]=e;if("__unassigned__"===t)return{key:t,label:"Unassigned",items:a};let r=U.get(t),s=r?T[r.module_id]:void 0;return{key:t,label:r?"".concat(s?s+" — ":"").concat(r.title):"Unknown Section",items:a}}).sort((e,t)=>e.label.localeCompare(t.label))},[O,U,T]),L=M.length;return(0,r.jsxs)("div",{className:"mx-auto max-w-6xl p-6 text-gray-900",children:[(0,r.jsx)("h1",{className:"mb-6 text-2xl font-semibold text-white",children:"Notes & Spaced Repetition (MVP)"}),(0,r.jsxs)("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2",children:[(0,r.jsxs)(n.Zp,{children:[(0,r.jsx)(n.aR,{children:(0,r.jsx)(n.ZB,{className:"text-lg",children:_?"Edit Note":"Add Note"})}),(0,r.jsxs)(n.Wu,{className:"space-y-4",children:[(0,r.jsx)(d.T,{value:g,onChange:e=>v(e.target.value),placeholder:"Write your note, summary, or key fact...",className:"min-h-[120px]"}),(0,r.jsxs)("div",{className:"grid grid-cols-1 gap-2",children:[(0,r.jsx)(m.J,{className:"text-sm text-gray-200",children:"Section (optional)"}),(0,r.jsxs)(f.Select,{value:j,onValueChange:e=>w(e),children:[(0,r.jsx)(f.SelectTrigger,{children:(0,r.jsx)(f.SelectValue,{placeholder:k.length?"Select a section":"No sections available"})}),(0,r.jsxs)(f.SelectContent,{children:[(0,r.jsx)(f.SelectItem,{value:b,children:"Unassigned"}),k.map(e=>(0,r.jsx)(f.SelectItem,{value:e.id,children:T[e.module_id]?"".concat(T[e.module_id]," — ").concat(e.title):e.title},e.id))]})]})]}),(0,r.jsx)(l.p,{value:y,onChange:e=>N(e.target.value),placeholder:"Tags (comma-separated), e.g. fundamentals, sensors"}),(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsx)(i.$,{onClick:I,children:_?"Save":"Add"}),_&&(0,r.jsx)(i.$,{variant:"outline",onClick:()=>{S(null),v(""),N("")},children:"Cancel"})]})]})]}),(0,r.jsxs)(n.Zp,{children:[(0,r.jsx)(n.aR,{children:(0,r.jsxs)(n.ZB,{className:"text-lg",children:["Review Queue (",L," due)"]})}),(0,r.jsx)(n.Wu,{className:"space-y-4",children:P?(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"mb-3 text-sm text-gray-600",children:["Next due ",h((0,o.m3)(P.srs))]}),(0,r.jsx)("div",{className:"rounded-md bg-gray-50 p-4 text-gray-800",children:P.text}),(0,r.jsxs)("div",{className:"mt-4 flex flex-wrap gap-2",children:[(0,r.jsx)(i.$,{variant:"destructive",onClick:()=>D(P,"again"),children:"Again"}),(0,r.jsx)(i.$,{variant:"outline",onClick:()=>D(P,"hard"),children:"Hard"}),(0,r.jsx)(i.$,{onClick:()=>D(P,"good"),children:"Good"}),(0,r.jsx)(i.$,{variant:"secondary",onClick:()=>D(P,"easy"),children:"Easy"})]})]}):(0,r.jsx)("div",{className:"text-sm text-gray-600",children:"No notes are due now. Add notes or come back later!"})})]})]}),(0,r.jsxs)(n.Zp,{className:"mt-6",children:[(0,r.jsx)(n.aR,{children:(0,r.jsxs)(n.ZB,{className:"text-lg",children:["Your Notes (",e.length,") — Grouped by Section"]})}),(0,r.jsx)(n.Wu,{children:0===O.length?(0,r.jsx)("div",{className:"text-sm text-gray-600",children:"No notes yet. Add your first note above."}):(0,r.jsx)("div",{className:"space-y-6",children:B.map(e=>(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"mb-2 text-sm font-medium text-gray-200",children:e.label}),(0,r.jsx)("ul",{className:"divide-y divide-gray-200",children:e.items.map(e=>(0,r.jsxs)("li",{className:"flex items-start justify-between gap-4 py-3",children:[(0,r.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,r.jsx)("div",{className:"whitespace-pre-wrap break-words text-gray-100",children:e.text}),(0,r.jsxs)("div",{className:"mt-1 text-xs text-gray-400",children:["Next review: ",(0,o.nZ)(e.srs)?(0,r.jsx)("span",{className:"font-medium text-red-400",children:"due now"}):(0,r.jsx)("span",{children:h((0,o.m3)(e.srs))}),e.tags.length>0&&(0,r.jsxs)("span",{className:"ml-2",children:["• Tags: ",e.tags.join(", ")]})]})]}),(0,r.jsxs)("div",{className:"shrink-0 space-x-2",children:[(0,r.jsx)(i.$,{size:"sm",variant:"outline",onClick:()=>{S(e.id),v(e.text),N(e.tags.join(", ")),w(e.sectionId||b)},children:"Edit"}),(0,r.jsx)(i.$,{size:"sm",variant:"destructive",onClick:()=>E(e.id),children:"Delete"})]})]},e.id))})]},e.key))})})]})]})}},31120:(e,t,a)=>{"use strict";a.d(t,{T:()=>i});var r=a(95155),s=a(12115),n=a(64269);let i=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("textarea",{className:(0,n.cn)("flex min-h-[60px] w-full rounded-md border border-input bg-transparent px-3 py-2 text-base shadow-sm placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",a),ref:t,...s})});i.displayName="Textarea"},60080:(e,t,a)=>{"use strict";a.d(t,{z:()=>m});var r=a(95704);let s=r.env.NEXT_PUBLIC_POSTHOG_KEY||"",n="true"===(r.env.NEXT_PUBLIC_ANALYTICS_DEBUG||"").toLowerCase(),i=(r.env.NEXT_PUBLIC_POSTHOG_HOST||"https://us.i.posthog.com").replace(/\/$/,""),l="ph_distinct_id",d=null;function o(){return"undefined"!=typeof crypto&&crypto.randomUUID?crypto.randomUUID():Math.random().toString(36).slice(2)+Date.now().toString(36)}function c(){if(d)return d;try{let e=localStorage.getItem(l);if(e)return d=e;let t=o();return localStorage.setItem(l,t),d=t,t}catch(e){return d=o()}}async function u(e,t){if(!s)return;let a={api_key:s,event:e,properties:{distinct_id:c(),$current_url:function(){try{return window.location.href}catch(e){return}}(),...t},timestamp:function(){try{return new Date().toISOString()}catch(e){return""}}()},r="".concat(i,"/e/");try{var l;if(n&&console.debug("[analytics]",e,{...a.properties,timestamp:a.timestamp}),null==(l=navigator)?void 0:l.sendBeacon){let e=new Blob([JSON.stringify(a)],{type:"application/json"});navigator.sendBeacon(r,e)}else await fetch(r,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a),keepalive:!0})}catch(e){}}let m={init:()=>!!s,capture:(e,t)=>u(e,t),pageview:e=>u("$pageview",e?{path:e}:void 0),identify(e,t){if(e)return u("$identify",{distinct_id:c(),$user_id:e,...t})}}},65142:(e,t,a)=>{"use strict";a.d(t,{p:()=>i});var r=a(95155),s=a(12115),n=a(64269);let i=s.forwardRef((e,t)=>{let{className:a,type:s,...i}=e;return(0,r.jsx)("input",{type:s,className:(0,n.cn)("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-base shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",a),ref:t,...i})});i.displayName="Input"},76444:(e,t,a)=>{"use strict";a.d(t,{J:()=>o});var r=a(95155),s=a(12115),n=a(10489),i=a(83101),l=a(64269);let d=(0,i.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),o=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(n.b,{ref:t,className:(0,l.cn)(d(),a),...s})});o.displayName=n.b.displayName},80854:(e,t,a)=>{Promise.resolve().then(a.bind(a,18385))},86948:(e,t,a)=>{"use strict";a.d(t,{BT:()=>o,Wu:()=>c,ZB:()=>d,Zp:()=>i,aR:()=>l,wL:()=>u});var r=a(95155),s=a(12115),n=a(64269);let i=s.forwardRef((e,t)=>{let{className:a,variant:s="cyberpunk",...i}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("rounded-xl border text-card-foreground shadow",{default:"bg-card",cyberpunk:"relative bg-black/20 backdrop-blur-xl border-cyan-500/20 text-cyan-100 shadow-[0_0_50px_rgba(34,211,238,0.1)] transition-all duration-200 ease-out hover:shadow-[0_0_80px_rgba(34,211,238,0.15)] hover:scale-[1.03] hover:-translate-y-0.5 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-cyan-400/50"}[s],a),...i})});i.displayName="Card";let l=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",a),...s})});l.displayName="CardHeader";let d=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("font-semibold leading-none tracking-tight",a),...s})});d.displayName="CardTitle";let o=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("text-sm text-muted-foreground",a),...s})});o.displayName="CardDescription";let c=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("p-6 pt-0",a),...s})});c.displayName="CardContent";let u=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("flex items-center p-6 pt-0",a),...s})});u.displayName="CardFooter"},97602:(e,t,a)=>{"use strict";a.d(t,{hO:()=>d,sG:()=>l});var r=a(12115),s=a(47650),n=a(32467),i=a(95155),l=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((e,t)=>{let a=(0,n.TL)(`Primitive.${t}`),s=r.forwardRef((e,r)=>{let{asChild:s,...n}=e;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,i.jsx)(s?a:t,{...n,ref:r})});return s.displayName=`Primitive.${t}`,{...e,[t]:s}},{});function d(e,t){e&&s.flushSync(()=>e.dispatchEvent(t))}}},e=>{e.O(0,[5105,4909,5376,5040,2268,488,6093,7887,3283,8441,1255,7358],()=>e(e.s=80854)),_N_E=e.O()}]);