(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9344],{11929:(e,t,s)=>{"use strict";let n;s.d(t,{A:()=>o});let a={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)},r=new Uint8Array(16),i=[];for(let e=0;e<256;++e)i.push((e+256).toString(16).slice(1));let o=function(e,t,s){if(a.randomUUID&&!t&&!e)return a.randomUUID();let o=(e=e||{}).random||(e.rng||function(){if(!n&&!(n="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)))throw Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return n(r)})();if(o[6]=15&o[6]|64,o[8]=63&o[8]|128,t){s=s||0;for(let e=0;e<16;++e)t[s+e]=o[e];return t}return function(e,t=0){return i[e[t+0]]+i[e[t+1]]+i[e[t+2]]+i[e[t+3]]+"-"+i[e[t+4]]+i[e[t+5]]+"-"+i[e[t+6]]+i[e[t+7]]+"-"+i[e[t+8]]+i[e[t+9]]+"-"+i[e[t+10]]+i[e[t+11]]+i[e[t+12]]+i[e[t+13]]+i[e[t+14]]+i[e[t+15]]}(o)}},15894:(e,t,s)=>{"use strict";s.d(t,{dj:()=>u,oR:()=>d});var n=s(12115);let a=0,r=new Map,i=e=>{if(r.has(e))return;let t=setTimeout(()=>{r.delete(e),c({type:"REMOVE_TOAST",toastId:e})},1e6);r.set(e,t)},o=[],l={toasts:[]};function c(e){l=((e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:s}=t;return s?i(s):e.toasts.forEach(e=>{i(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===s||void 0===s?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}})(l,e),o.forEach(e=>{e(l)})}function d(e){let{...t}=e,s=(a=(a+1)%Number.MAX_SAFE_INTEGER).toString(),n=()=>c({type:"DISMISS_TOAST",toastId:s});return c({type:"ADD_TOAST",toast:{...t,id:s,open:!0,onOpenChange:e=>{e||n()}}}),{id:s,dismiss:n,update:e=>c({type:"UPDATE_TOAST",toast:{...e,id:s}})}}function u(){let[e,t]=n.useState(l);return n.useEffect(()=>(o.push(t),()=>{let e=o.indexOf(t);e>-1&&o.splice(e,1)}),[e]),{...e,toast:d,dismiss:e=>c({type:"DISMISS_TOAST",toastId:e})}}},33905:(e,t,s)=>{"use strict";s.d(t,{default:()=>y});var n,a,r=s(95155),i=s(12115);function o(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{questionCount:s,timeLimit:n}="mock-exam"===e?{questionCount:75,timeLimit:105}:{questionCount:25,timeLimit:35};return{assessmentType:e,type:e,userId:t.userId,moduleId:t.moduleId,questionCount:s,timeLimit:n,allowReview:!1,showExplanations:!1,showFeedback:!1,shuffleQuestions:!0,shuffleAnswers:!0,enableAnalytics:!0}}var l=s(46528),c=s(52873);class d{async updateSession(e,t){let s=this.activeSessions.get(e);s&&Object.assign(s,t)}async initializeSession(e){let t="session_".concat(Date.now(),"_").concat(Math.random().toString(36).substr(2,9)),s=await this.getQuestionsForAssessment(e);e.adaptiveDifficulty||this.shuffleArray(s);let n={sessionId:t,config:e,questions:s.slice(0,e.questionCount),responses:new Map,startTime:new Date,timeSpent:0,currentQuestionIndex:0,isCompleted:!1,isPaused:!1};return this.activeSessions.set(t,n),this.sessionAnalytics.set(t,[]),e.enableAnalytics&&await this.recordAnalytics(t,{type:"session_start",timestamp:new Date,data:{assessmentType:e.type,questionCount:e.questionCount,moduleId:e.moduleId,domainFilter:e.domainFilter}}),n}async recordResponse(e,t,s,n,a){let r=this.activeSessions.get(e);if(!r)throw Error("Session not found");r.responses.set(t,s),r.timeSpent+=n,r.config.enableAnalytics&&await this.recordAnalytics(e,{type:"question_answered",timestamp:new Date,data:{questionId:t,selectedAnswers:s,timeSpent:n,confidence:a,questionIndex:r.currentQuestionIndex}}),await l.L7.updateQuestionProgress({userId:"current_user",questionId:t,isCorrect:await this.isResponseCorrect(t,s),timeSpent:n,confidence:a,sessionId:e})}async navigateToNext(e){let t=this.activeSessions.get(e);if(!t)throw Error("Session not found");return t.currentQuestionIndex<t.questions.length-1&&(t.currentQuestionIndex++,t.config.adaptiveDifficulty&&await this.adjustDifficulty(e),!0)}async completeAssessment(e){let t=this.activeSessions.get(e);if(!t)throw Error("Session not found");t.endTime=new Date,t.isCompleted=!0;let s=await this.calculateResults(t),n=await this.generateDetailedAnalytics(e);return await l.L7.updateAssessmentProgress({userId:"current_user",assessmentType:t.config.type,moduleId:t.config.moduleId,result:s,analytics:n,sessionId:e}),s.remediationPlan=await this.generateRemediationPlan(s,n),t.config.enableAnalytics&&await this.recordAnalytics(e,{type:"assessment_completed",timestamp:new Date,data:{result:s,analytics:n,sessionDuration:s.timeSpent}}),this.activeSessions.delete(e),s}async calculateResults(e){let{questions:t,responses:s,config:n,startTime:a,endTime:r}=e,i=0,o=0,l=0,c={},d=[];for(let n of t){let t=s.get(n.id)||[],a=await this.isResponseCorrect(n.id,t),r=this.calculateQuestionScore(n,a),u=this.getQuestionTimeSpent(e.sessionId,n.id);a&&i++,o+=r,l+=n.points||1;let m=n.domain||"general";c[m]||(c[m]={correct:0,total:0,score:0}),c[m].total++,a&&(c[m].correct++,c[m].score+=r),d.push({questionId:n.id,isCorrect:a,score:r,timeSpent:u})}let u=l>0?o/l:0,m=u>=n.passingScore,p={correct:i,total:t.length,percentage:100*u,weightedScore:100*u,domainBreakdown:Object.entries(c).map(e=>{let[t,s]=e;return{domain:t,correct:s.correct,total:s.total,percentage:s.total>0?s.correct/s.total*100:0}}),objectiveBreakdown:[]},g={totalTime:r?Math.floor((r.getTime()-a.getTime())/1e3):0,averageTimePerQuestion:d.length>0?d.reduce((e,t)=>e+t.timeSpent,0)/d.length:0,fastestQuestion:d.length>0?Math.min(...d.map(e=>e.timeSpent)):0,slowestQuestion:d.length>0?Math.max(...d.map(e=>e.timeSpent)):0,confidenceAlignment:0,difficultyProgression:{beginnerAccuracy:0,intermediateAccuracy:0,advancedAccuracy:0,suggestedLevel:"Beginner"}};return{sessionId:e.sessionId,assessmentType:n.type,moduleId:n.moduleId,score:p,performance:g,remediation:{overallRecommendation:m?"Passed - continue practicing":"Review fundamentals",objectiveRemediation:[],studyPlan:[],retakeEligibility:{eligible:!m,waitPeriod:24*!m,maxAttempts:3,currentAttempt:1}},overallScore:u,correctAnswers:i,incorrectAnswers:t.length-i,totalQuestions:t.length,timeSpent:r?Math.floor((r.getTime()-a.getTime())/1e3):0,passed:m,domainBreakdown:c,questionResults:d,completedAt:r||new Date,passingScore:n.passingScore}}async generateDetailedAnalytics(e){let t=this.activeSessions.get(e)||await this.getCompletedSession(e);if(!t)throw Error("Session not found");let s=this.sessionAnalytics.get(e)||[],n=t.endTime?(t.endTime.getTime()-t.startTime.getTime())/1e3:t.timeSpent,a=n/t.questions.length,r={},i={},o=[],l=[];for(let s of t.questions){let n=t.responses.get(s.id)||[],a=await this.isResponseCorrect(s.id,n),c=this.getQuestionTimeSpent(e,s.id),d=this.getQuestionConfidence(e,s.id),u=s.domain||"general";r[u]||(r[u]={correct:0,total:0,score:0}),r[u].total++,a&&r[u].correct++;let m=s.difficulty||"medium";i[m]||(i[m]={correct:0,total:0,score:0}),i[m].total++,a&&i[m].correct++,o.push({questionId:s.id,timeSpent:c}),null!==d&&l.push(d)}Object.keys(r).forEach(e=>{let t=r[e];t.score=t.total>0?t.correct/t.total:0}),Object.keys(i).forEach(e=>{let t=i[e];t.score=t.total>0?t.correct/t.total:0});let c=Object.entries(r).filter(e=>{let[t,s]=e;return s.score<.6}).map(e=>{let[t]=e;return t}),d=Object.entries(r).filter(e=>{let[t,s]=e;return s.score>=.8}).map(e=>{let[t]=e;return t});return{sessionDuration:n,averageTimePerQuestion:a,domainPerformance:r,difficultyPerformance:i,confidenceLevels:l,strugglingTopics:c,strongTopics:d,timeDistribution:o,responsePatterns:{changedAnswers:s.filter(e=>"answer_changed"===e.type).length,skippedQuestions:s.filter(e=>"question_skipped"===e.type).length,flaggedQuestions:s.filter(e=>"question_flagged"===e.type).length}}}async generateRemediationPlan(e,t){var s,n,a,r;let i=null!=(s=e.domainBreakdown)?s:{};Object.entries(i).filter(e=>{var t;let[s,n]=e;return(null!=(t=null==n?void 0:n.score)?t:0)<.7}).map(e=>{let[t]=e;return t});let o=[];for(let e of t.strugglingTopics){let t=i[e];t&&(null!=(n=t.score)?n:0)<.7&&o.push({order:o.length+1,title:"Study ".concat(e),description:"Targeted study plan for ".concat(e),type:"review",domain:e,priority:(null!=(a=t.score)?a:0)<.5?"high":"medium",estimatedTime:Math.ceil((1-(null!=(r=t.score)?r:0))*120),resources:await this.getStudyResourcesForDomain(e),practiceQuestions:await this.getPracticeQuestionsForDomain(e,10)})}o.sort((e,t)=>{var s,n,a,r;let i={high:3,medium:2,low:1},o=null!=(s=e.priority)?s:"low",l=null!=(n=t.priority)?n:"low",c=null!=(a=i[o])?a:0;return(null!=(r=i[l])?r:0)-c});let l=o.reduce((e,t)=>e+(t.estimatedTime||0),0),c={eligible:!e.passed,waitPeriod:24*!e.passed,maxAttempts:3,currentAttempt:1};return{overallRecommendation:e.passed?"Continue practicing weaker areas to strengthen your knowledge":"Focus on fundamental concepts before attempting the certification exam",objectiveRemediation:[],studyPlan:o,retakeEligibility:c,nextSteps:e.passed?["Schedule certification exam","Review flagged questions","Practice advanced scenarios"]:["Complete remediation study plan","Retake practice assessment","Focus on core concepts"],estimatedStudyTime:l,targetRetakeDate:this.calculateTargetRetakeDate(t.strugglingTopics.length)}}async recordAnalytics(e,t){let s=this.sessionAnalytics.get(e)||[];s.push(t),this.sessionAnalytics.set(e,s),await c.E6.track(t)}async adjustDifficulty(e){let t=this.activeSessions.get(e);if(!t)return;let s=t.questions.slice(Math.max(0,t.currentQuestionIndex-3),t.currentQuestionIndex),n=0;for(let e of s){let s=t.responses.get(e.id);s&&await this.isResponseCorrect(e.id,s)&&n++}let a=s.length>0?n/s.length:.5;a>.8?await this.increaseDifficulty(e):a<.4&&await this.decreaseDifficulty(e)}async increaseDifficulty(e){await this.recordAnalytics(e,{type:"difficulty_adjusted",timestamp:new Date,data:{adjustment:"increased",reason:"high_performance"}})}async decreaseDifficulty(e){await this.recordAnalytics(e,{type:"difficulty_adjusted",timestamp:new Date,data:{adjustment:"decreased",reason:"low_performance"}})}async getQuestionsForAssessment(e){return[]}async isResponseCorrect(e,t){return!0}calculateQuestionScore(e,t){return t?e.points||1:0}getQuestionTimeSpent(e,t){return(this.sessionAnalytics.get(e)||[]).filter(e=>{var s;return(null==(s=e.data)?void 0:s.questionId)===t&&"question_answered"===e.type}).reduce((e,t)=>{var s;return e+((null==(s=t.data)?void 0:s.timeSpent)||0)},0)}getQuestionConfidence(e,t){var s;let n=(this.sessionAnalytics.get(e)||[]).find(e=>{var s;return(null==(s=e.data)?void 0:s.questionId)===t&&"question_answered"===e.type});return(null==n||null==(s=n.data)?void 0:s.confidence)||null}async getStudyResourcesForDomain(e){return["".concat(e,"-study-guide.pdf"),"".concat(e,"-video-tutorial.mp4")]}async getPracticeQuestionsForDomain(e,t){return Array(t).fill(null).map((t,s)=>"".concat(e,"-practice-").concat(s+1))}calculateTargetRetakeDate(e){let t=Math.max(7,3*e),s=new Date;return s.setDate(s.getDate()+t),s}shuffleArray(e){for(let t=e.length-1;t>0;t--){let s=Math.floor(Math.random()*(t+1));[e[t],e[s]]=[e[s],e[t]]}}async getCompletedSession(e){return null}constructor(){this.activeSessions=new Map,this.sessionAnalytics=new Map}}let u=new d;u.initializeSession=u.initializeSession.bind(u),u.recordResponse=null==(n=u.recordResponse)?void 0:n.bind(u),u.navigateToNext=null==(a=u.navigateToNext)?void 0:a.bind(u),u.completeAssessment=u.completeAssessment.bind(u),u.calculateResults=u.calculateResults.bind(u),u.updateSession=u.updateSession.bind(u);var m=s(3998),p=s(65380),g=s(6521),h=s(15894);function y(){var e,t;let{user:s}=(0,p.A)(),{startAssessment:n,submitAnswer:a,submitAssessment:d,updateProgress:y,trackEvent:w,cancelAssessment:v,currentSession:S,currentResult:x,isLoading:A}=function(){let[e,t]=(0,i.useState)(null),[s,n]=(0,i.useState)(null),[a,r]=(0,i.useState)(!1),[o,d]=(0,i.useState)(null),m=(0,i.useCallback)(async e=>{try{var s;r(!0),d(null);let n=await u.initializeSession(e),a={id:n.sessionId,assessmentId:e.assessmentId,userId:e.userId,moduleId:e.moduleId,type:e.assessmentType,status:"in_progress",startTime:new Date,timeLimit:e.timeLimit,questions:n.questions,answers:[],currentQuestionIndex:0,score:null,passed:null,completedAt:null};t(a),await c.cu.track({type:"assessment_started",userId:null!=(s=e.userId)?s:"",data:{assessmentId:e.assessmentId,assessmentType:e.assessmentType,moduleId:e.moduleId,questionCount:n.questions.length,timeLimit:e.timeLimit},timestamp:new Date})}catch(e){d(e instanceof Error?e.message:"Failed to start assessment"),console.error("Error starting assessment:",e)}finally{r(!1)}},[]),p=(0,i.useCallback)(async(s,n)=>{if(!e)throw Error("No active assessment session");try{var a,r,i,o,l,m;d(null);let p=Array.isArray(e.answers)?[...e.answers]:[],g=p.findIndex(e=>e.questionId===s);g>=0?p[g]=n:p.push(n);let h={...e,answers:p};t(h),await u.updateSession(e.id,{answers:p}),await c.cu.track({type:"question_answered",userId:null!=(a=e.userId)?a:"",sessionId:e.id,data:{sessionId:e.id,questionId:s,selectedAnswers:(null!=(r=n.selectedAnswers)?r:Array.isArray(n.selectedAnswer)?n.selectedAnswer:[n.selectedAnswer]).filter(Boolean),answer:null!=(i=n.selectedAnswers)?i:n.selectedAnswer,timeSpent:null!=(o=n.timeSpent)?o:0,attempts:null!=(l=n.attempts)?l:1,confidence:null!=(m=n.confidence)?m:null},timestamp:new Date})}catch(e){d(e instanceof Error?e.message:"Failed to submit answer"),console.error("Error submitting answer:",e)}},[e]),g=(0,i.useCallback)(async()=>{if(!e)throw Error("No active assessment session");try{var s,a,i,o,m,p,g;r(!0),d(null);let h=await u.calculateResults(e),y={...e,status:"completed",completedAt:new Date,score:h.overallScore,passed:h.passed};return t(y),n(h),await l.nV.updateAssessmentProgress({userId:null!=(s=e.userId)?s:"",moduleId:e.moduleId,assessmentId:e.assessmentId,score:h.overallScore,passed:h.passed,completedAt:h.completedAt,timeSpent:null!=(i=null!=(a=h.timeSpent)?a:h.totalTime)?i:0,correctAnswers:null!=(o=h.correctAnswers)?o:0,incorrectAnswers:null!=(m=h.incorrectAnswers)?m:0,totalQuestions:null!=(p=h.totalQuestions)?p:0,domainBreakdown:h.domainBreakdown}),await c.cu.track({type:"assessment_completed",userId:null!=(g=e.userId)?g:"",sessionId:e.id,data:{sessionId:e.id,score:h.overallScore,passed:h.passed,timeSpent:h.timeSpent,correctAnswers:h.correctAnswers,totalQuestions:h.totalQuestions,domainBreakdown:h.domainBreakdown},timestamp:new Date}),h}catch(e){throw d(e instanceof Error?e.message:"Failed to submit assessment"),console.error("Error submitting assessment:",e),e}finally{r(!1)}},[e]),h=(0,i.useCallback)(()=>{e&&(c.cu.track({type:"assessment_cancelled",userId:e.userId,sessionId:e.id,data:{sessionId:e.id,questionsAnswered:Array.isArray(e.answers)?e.answers.length:0,totalQuestions:e.questions.length,timeSpent:Date.now()-e.startTime.getTime()},timestamp:new Date}),t(null),n(null)),d(null)},[e]),y=(0,i.useCallback)(async e=>{try{await l.nV.updateQuestionProgress(e)}catch(e){console.error("Error updating progress:",e)}},[]),f=(0,i.useCallback)(async(e,t)=>{try{return await l.nV.getUserProgress(e,t)}catch(e){return console.error("Error getting progress:",e),null}},[]),w=(0,i.useCallback)(async e=>{try{await c.cu.track(e)}catch(e){console.error("Error tracking event:",e)}},[]),v=(0,i.useCallback)(async(e,t)=>{try{return await c.cu.getUserAnalytics(e,t)}catch(e){return console.error("Error getting analytics:",e),null}},[]);return(0,i.useEffect)(()=>()=>{e&&"in_progress"===e.status&&h()},[]),{currentSession:e,currentResult:s,isLoading:a,error:o,startAssessment:m,submitAnswer:p,submitAssessment:g,cancelAssessment:h,updateProgress:y,getProgress:f,trackEvent:w,getAnalytics:v}}(),[b,I]=(0,i.useState)(null),[j,k]=(0,i.useState)(0),[T,D]=(0,i.useState)(0),P=(0,i.useRef)(null),[N,E]=(0,i.useState)({}),q=(null==s?void 0:s.id)&&(null==S?void 0:S.id)?"tco-exam-answers:".concat(s.id,":").concat(S.id):null,_=async e=>{I(e);let t=o(e,{});await n(t)};(0,i.useEffect)(()=>{if(!(null==S?void 0:S.timeLimit)||!(null==S?void 0:S.startTime))return;let e=S.startTime.getTime()+60*(S.timeLimit||0)*1e3,t=()=>{let t=Math.max(0,Math.floor((e-Date.now())/1e3));D(t),0===t&&d()};t();let s=window.setInterval(t,1e3);return()=>window.clearInterval(s)},[null==S?void 0:S.id,null==S?void 0:S.timeLimit,null==S?void 0:S.startTime]),(0,i.useEffect)(()=>{try{var e,t;if(!q)return;let s=localStorage.getItem(q);if(!s)return;let n=JSON.parse(s);n.answers&&E(n.answers),"number"==typeof n.index&&k(Math.max(0,Math.min((null!=(t=null==S||null==(e=S.questions)?void 0:e.length)?t:1)-1,n.index)))}catch(e){}},[q]),(0,i.useEffect)(()=>{if(P.current=Date.now(),S){var e,t;w({type:"question_navigated",userId:null!=(t=null==s?void 0:s.id)?t:"",sessionId:S.id,data:{index:j,questionId:null==(e=S.questions[j])?void 0:e.id},timestamp:new Date})}try{if(q){let e=localStorage.getItem(q),t=e?JSON.parse(e):{};t.index=j,t.answers=t.answers||N,localStorage.setItem(q,JSON.stringify(t))}}catch(e){}},[j,null==S?void 0:S.id]);let C=(0,i.useMemo)(()=>{var e;return null==S||null==(e=S.questions)?void 0:e[j]},[null==S?void 0:S.questions,j]),Q=(0,i.useMemo)(()=>{var e,t;let s=null!=(t=null==S||null==(e=S.questions)?void 0:e.length)?t:0;return s>0&&j===s-1},[j,null==S||null==(e=S.questions)?void 0:e.length]);async function R(e){var t,n;if(!S||!C)return;let r=null!=(t=P.current)?t:Date.now(),i=Math.max(0,Math.floor((Date.now()-r)/1e3)),o=e===C.correctAnswerId;E(t=>{let s={...t,[C.id]:e};try{if(q){let e=localStorage.getItem(q),t=e?JSON.parse(e):{};localStorage.setItem(q,JSON.stringify({...t,answers:s,index:j}))}}catch(e){}return s}),await a(C.id,{questionId:C.id,selectedAnswer:e,selectedAnswers:[e],attempts:1,isCorrect:o,timeSpent:i,timestamp:new Date}),await y({userId:null!=(n=null==s?void 0:s.id)?n:"",questionId:C.id,isCorrect:o,timeSpent:i,sessionId:S.id,timestamp:new Date})}return(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)(m.$,{disabled:A,onClick:()=>_("practice-test"),children:"Start Practice Test"}),(0,r.jsx)(m.$,{variant:"secondary",disabled:A,onClick:()=>_("mock-exam"),children:"Start Mock Exam"})]}),S?(0,r.jsxs)("div",{"data-testid":"exam-session",className:"rounded border p-4 space-y-4",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between text-sm text-slate-600 dark:text-slate-300",children:[(0,r.jsxs)("span",{children:["Session: ",S.id," \xb7 Type: ",b]}),(0,r.jsxs)("span",{"aria-live":"polite","aria-label":"Time remaining",children:["⏱ ",function(e){let t=Math.floor(e/60);return"".concat(t,":").concat((e%60).toString().padStart(2,"0"))}(T)]})]}),(0,r.jsxs)("div",{className:"font-medium",children:["Question ",j+1," of ",S.questions.length]}),C?(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"mb-3 flex items-start justify-between gap-3",children:[(0,r.jsx)("div",{className:"flex-1",children:C.question}),(0,r.jsx)(m.$,{variant:"outline",size:"sm",onClick:async()=>{var e,t;let n="Q: ".concat(C.question,"\nAnswer: ").concat((null==(t=C.choices)||null==(e=t.find(e=>e.id===C.correctAnswerId))?void 0:e.text)||"").concat(C.explanation?"\nWhy: ".concat(C.explanation):"");await (0,g.saveQuickNote)(n,{tags:["exam",C.domain,C.difficulty],user:s}),(0,h.oR)({title:"Added to Notes",description:"View it under Notes for spaced review."})},children:"Add to Notes"})]}),(0,r.jsx)("div",{className:"space-y-2",children:null==(t=C.choices)?void 0:t.map(e=>(0,r.jsxs)("label",{className:"flex items-center gap-2 cursor-pointer",children:[(0,r.jsx)("input",{type:"radio",name:"q-".concat(C.id),value:e.id,onChange:()=>R(e.id),checked:N[C.id]===e.id,"data-testid":"answer-radio",disabled:!!(null==S?void 0:S.completedAt)}),(0,r.jsx)("span",{children:e.text})]},e.id))}),(0,r.jsxs)("div",{className:"mt-4",children:[(0,r.jsx)("div",{className:"text-xs text-slate-500 mb-1",children:"Jump to question"}),(0,r.jsx)("div",{className:"flex flex-wrap gap-2","data-testid":"mini-map",children:S.questions.map((e,t)=>{let s=N[e.id],n=!!S.completedAt,a="px-2 py-1 rounded text-xs";return t===j?a+=" bg-blue-600 text-white":n?a+=s&&s===e.correctAnswerId?" bg-green-600 text-white":s?" bg-red-600 text-white":" bg-slate-200 dark:bg-slate-700":a+=s?" bg-blue-100 dark:bg-blue-900 text-blue-700":" bg-slate-200 dark:bg-slate-700",(0,r.jsx)("button",{type:"button",className:a,"data-testid":"mini-map-item","aria-label":"Go to question ".concat(t+1),onClick:()=>k(t),disabled:!!(null==S?void 0:S.completedAt),children:t+1},e.id)})})]})]}):null,(0,r.jsxs)("div",{className:"flex items-center justify-between mt-4",children:[(0,r.jsx)(m.$,{variant:"outline",onClick:()=>k(e=>Math.max(0,e-1)),disabled:0===j,children:"Previous"}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[!Q&&(0,r.jsx)(m.$,{onClick:()=>k(e=>{var t,s;return Math.min((null!=(s=null==S||null==(t=S.questions)?void 0:t.length)?s:1)-1,e+1)}),children:"Next"}),Q&&(0,r.jsx)(m.$,{onClick:async()=>{await d();try{q&&localStorage.removeItem(q)}catch(e){}},children:"Submit Exam"})]})]})]}):null,S&&"completed"===S.status?(0,r.jsxs)("div",{className:"rounded border p-4 space-y-3","data-testid":"review-panel",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("div",{className:"font-semibold",children:"Exam Review"}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(m.$,{variant:"outline",onClick:()=>{v(),k(0),E({}),D(0);try{q&&localStorage.removeItem(q)}catch(e){}},children:"Back to start"}),(0,r.jsx)(m.$,{onClick:async()=>{k(0),E({}),D(0),await n(o(null!=b?b:"practice-test",{}))},children:"Retake Exam"})]})]}),(0,r.jsx)(f,{result:x}),(0,r.jsx)("div",{className:"space-y-3",children:S.questions.map(e=>{let t=N[e.id],s=e.correctAnswerId,n=t===s,a=t=>{var s;return(null==(s=e.choices.find(e=>e.id===t))?void 0:s.text)||""};return(0,r.jsxs)("div",{className:"border rounded p-3","data-testid":"review-item",children:[(0,r.jsx)("div",{className:"mb-2",children:e.question}),(0,r.jsxs)("div",{className:"text-sm",children:["Your answer: ",(0,r.jsx)("span",{className:n?"text-green-600":"text-red-600",children:a(t)})]}),!n&&(0,r.jsxs)("div",{className:"text-sm",children:["Correct answer: ",(0,r.jsx)("span",{className:"text-green-600",children:a(s)})]})]},e.id)})})]}):null]})}function f(e){var t,s,n,a,i;let{result:o}=e;if(!o)return null;let l="number"==typeof o.overallScore?Math.round(100*o.overallScore):null,c=null!=(s=null!=(t=o.timeSpent)?t:o.totalTime)?s:0,d=Math.floor(c/60);return(0,r.jsxs)("div",{className:"rounded bg-slate-50 dark:bg-slate-900 border p-3 text-sm",children:[(0,r.jsxs)("div",{children:["Score: ",null!==l?"".concat(l,"%"):"—"," \xb7 Passed: ",String(o.passed)]}),(0,r.jsxs)("div",{children:["Questions: ",null!=(n=o.correctAnswers)?n:0," correct / ",null!=(a=o.incorrectAnswers)?a:0," incorrect of ",null!=(i=o.totalQuestions)?i:0]}),(0,r.jsxs)("div",{children:["Time Spent: ",d,":",(c%60).toString().padStart(2,"0")]}),o.domainBreakdown?(0,r.jsxs)("div",{className:"mt-2",children:[(0,r.jsx)("div",{className:"font-medium",children:"Domain Breakdown"}),(0,r.jsx)("ul",{className:"mt-1 grid grid-cols-1 sm:grid-cols-2 gap-1",children:Object.entries(o.domainBreakdown).map(e=>{var t,s;let[n,a]=e,i="number"==typeof a.score?Math.round(100*a.score):a.score;return(0,r.jsxs)("li",{className:"flex justify-between",children:[(0,r.jsx)("span",{children:n}),(0,r.jsxs)("span",{children:[null!=(t=a.correct)?t:0,"/",null!=(s=a.total)?s:0," \xb7 ",i,"%"]})]},n)})})]}):null,(0,r.jsx)("div",{className:"mt-2 text-slate-500",children:"Progress saved via ProgressService (score, totals, domain breakdown)."})]})}},45534:(e,t,s)=>{Promise.resolve().then(s.bind(s,33905))},46528:(e,t,s)=>{"use strict";s.d(t,{L7:()=>a,nV:()=>n});class n{static async updateQuestionProgress(e){return a.updateQuestionProgress(e)}static async updateAssessmentProgress(e){return a.updateAssessmentProgress(e)}static async getUserProgress(e,t){return a.getUserProgress(e,t)}static async getDomainProgress(e,t){return a.getDomainProgress(e,t)}static async getLearningAnalytics(e){return a.getLearningAnalytics(e)}async updateQuestionProgress(e){e.timestamp=new Date,console.log("Updating question progress in Supabase (placeholder)",e)}async updateAssessmentProgress(e){e.timestamp=new Date,console.log("Updating assessment progress in Supabase (placeholder)",e)}async getUserProgress(e,t){return console.log("Fetching user progress from Supabase (placeholder) for userId:",e,"moduleId:",t),null}async getDomainProgress(e,t){return console.log("Fetching domain progress from Supabase (placeholder) for userId:",e,"domain:",t),[]}async getCertificationProgress(e){return console.log("Fetching certification progress from Supabase (placeholder) for userId:",e),null}async getLearningAnalytics(e){return console.log("Generating learning analytics from Supabase (placeholder) for userId:",e),{overallProgress:0,domainBreakdown:{},studyPatterns:{averageSessionTime:0,peakPerformanceHours:[],consistencyScore:0},recommendations:[],nextMilestones:[]}}}let a=new n;n.updateQuestionProgress=a.updateQuestionProgress.bind(a),n.updateAssessmentProgress=a.updateAssessmentProgress.bind(a),n.getUserProgress=a.getUserProgress.bind(a),n.getDomainProgress=a.getDomainProgress.bind(a),n.getLearningAnalytics=a.getLearningAnalytics.bind(a)},52873:(e,t,s)=>{"use strict";s.d(t,{E6:()=>i,cu:()=>r});var n=s(62890),a=s(11929);class r{async track(e){var t;let s={event_id:(0,a.A)(),user_id:(null==(t=e.data)?void 0:t.userId)||"anonymous",session_id:e.session_id,event_type:e.type,event_timestamp:e.timestamp.toISOString(),event_data:e.data},{error:r}=await n.N.from("analytics_events").insert(s);if(r)throw console.error("Failed to track analytics event:",r.message),Error("Failed to track analytics event: ".concat(r.message))}async getDashboardMetrics(){return arguments.length>0&&void 0!==arguments[0]&&arguments[0],{totalSessions:0,totalQuestionsAnswered:0,averageSessionDuration:0,averageAccuracy:0,peakUsageHours:[],userEngagementScore:0,contentEffectiveness:{},dropoffPoints:[],learningPathOptimization:{mostEffectivePaths:[],strugglingPoints:[],recommendedAdjustments:[]}}}async getUserAnalytics(e,t){return null}async getContentAnalytics(e){return null}async getPerformanceMetrics(){return{responseTime:0,errorRate:0,throughput:0,resourceUtilization:{cpu:0,memory:0,storage:0},cacheHitRate:0,userSatisfactionScore:0}}async generateInsights(e){return{personalizedRecommendations:[],contentImprovements:[],systemOptimizations:[],learningEfficiencyTips:[]}}async exportData(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"json",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"all",s={timestamp:new Date().toISOString(),timeRange:t,events:[],metrics:await this.getDashboardMetrics(t),userMetrics:{},contentMetrics:{},performanceMetrics:await this.getPerformanceMetrics()};return"csv"===e?[["timestamp","type","userId","sessionId","data"],...s.events.map(e=>{var t;return[e.timestamp.toISOString(),e.type,(null==(t=e.data)?void 0:t.userId)||"",e.session_id||"",JSON.stringify(e.data||{})]})].map(e=>e.join(",")).join("\n"):JSON.stringify(s,null,2)}setupRealTimeStream(e){return console.warn("Real-time analytics streaming not fully implemented with direct Supabase integration."),()=>{}}}let i=new r;r.track=i.track.bind(i),r.getUserAnalytics=i.getUserAnalytics.bind(i),r.getContentAnalytics=i.getContentAnalytics.bind(i),r.track=i.track.bind(i),r.getUserAnalytics=i.getUserAnalytics.bind(i),r.getContentAnalytics=i.getContentAnalytics.bind(i)}},e=>{e.O(0,[4909,5376,5040,3283,8441,1255,7358],()=>e(e.s=45534)),_N_E=e.O()}]);