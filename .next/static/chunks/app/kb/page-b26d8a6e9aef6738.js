(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1422],{15420:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>o});var a=s(95155),n=s(12115),r=s(62890);function i(e){switch((e||"").toUpperCase()){case"AQ":return"Asking Questions";case"RQ":return"Refining Questions & Targeting";case"TA":return"Taking Action";case"NB":return"Navigation & Module Functions";case"RD":return"Reporting & Data Export";default:return e||"Unknown"}}async function c(){try{let{data:e,error:t}=await r.N.from("kb_modules").select("id,title,domain,metadata").order("id");if(t)return[];return e||[]}catch(e){return[]}}async function l(){let e=0,t=0,s={},a=!0;try{let{count:t,error:s}=await r.N.from("kb_modules").select("*",{count:"exact",head:!0});s||"number"!=typeof t||(e=t)}catch(e){a=!1}try{let{count:e,error:s}=await r.N.from("kb_questions").select("*",{count:"exact",head:!0});s||"number"!=typeof e||(t=e)}catch(e){a=!1}try{let{data:e,error:t}=await r.N.from("kb_questions").select("domain, count:count()");if(!t&&Array.isArray(e))for(let t of e){var n;let e=t.domain,a=Number(null!=(n=t.count)?n:0);s[e]=(s[e]||0)+a}}catch(e){}return{hasKbTables:a,modulesCount:e,questionsCount:t,byDomain:s}}var d=s(64269);function o(){let[e,t]=(0,n.useState)(!0),[s,r]=(0,n.useState)([]),[o,u]=(0,n.useState)(null);(0,n.useEffect)(()=>{(async()=>{let[e,s]=await Promise.all([c(),l()]);r(e),u(s),t(!1)})()},[]);let m=e=>{let{className:t,children:s}=e;return(0,a.jsx)("div",{className:(0,d.cn)("rounded-xl border border-cyan-500/20 bg-black/30 backdrop-blur px-5 py-4",t),children:s})};return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("h1",{className:"text-2xl font-semibold text-cyan-200",children:"Knowledge Base (KB)"}),(0,a.jsx)("span",{className:"text-xs text-cyan-300/70",children:"Read-only integration"})]}),e&&(0,a.jsx)(m,{children:(0,a.jsx)("div",{className:"text-cyan-100/80",children:"Loading KB status…"})}),!e&&o&&!o.hasKbTables&&(0,a.jsxs)(m,{className:"border-amber-500/30",children:[(0,a.jsx)("div",{className:"text-amber-300 font-medium",children:"KB tables not detected"}),(0,a.jsxs)("div",{className:"text-cyan-100/80 text-sm mt-2",children:["Create tables using ",(0,a.jsx)("code",{className:"font-mono",children:"docs/KB/export/SCHEMA_SQL_SETUP_KB.sql"})," then run the importer with ",(0,a.jsx)("code",{className:"font-mono",children:"TABLE_PREFIX=kb_"}),"."]})]}),!e&&o&&(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,a.jsxs)(m,{children:[(0,a.jsx)("div",{className:"text-cyan-300 text-sm",children:"Modules"}),(0,a.jsx)("div",{className:"text-3xl text-cyan-100 font-bold",children:o.modulesCount})]}),(0,a.jsxs)(m,{children:[(0,a.jsx)("div",{className:"text-cyan-300 text-sm",children:"Questions"}),(0,a.jsx)("div",{className:"text-3xl text-cyan-100 font-bold",children:o.questionsCount})]}),(0,a.jsxs)(m,{children:[(0,a.jsx)("div",{className:"text-cyan-300 text-sm",children:"Domains"}),(0,a.jsx)("div",{className:"mt-2 space-y-1",children:0===Object.keys(o.byDomain||{}).length?(0,a.jsx)("div",{className:"text-cyan-100/70 text-sm",children:"No question distribution available"}):Object.entries(o.byDomain).map(e=>{let[t,s]=e;return(0,a.jsxs)("div",{className:"flex items-center justify-between text-cyan-100/90 text-sm",children:[(0,a.jsxs)("span",{children:[i(t)," (",t,")"]}),(0,a.jsx)("span",{className:"font-medium",children:s})]},t)})})]})]}),!e&&s.length>0&&(0,a.jsxs)(m,{children:[(0,a.jsx)("div",{className:"text-cyan-200 font-medium mb-3",children:"Modules"}),(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:s.map(e=>{var t;let s=Array.isArray(null==(t=e.metadata)?void 0:t.lessons)?e.metadata.lessons.length:0;return(0,a.jsxs)("div",{className:"p-3 rounded-lg bg-black/20 border border-cyan-500/10",children:[(0,a.jsx)("div",{className:"text-cyan-100 font-semibold",children:e.title}),(0,a.jsxs)("div",{className:"text-xs text-cyan-300/70 mt-1",children:[i(e.domain)," (",e.domain,")",s>0&&(0,a.jsxs)("span",{className:"ml-2 text-cyan-200/80",children:["• ",s," lesson",s>1?"s":""]})]})]},e.id)})})]})]})}},62890:(e,t,s)=>{"use strict";s.d(t,{N:()=>c});var a=s(65040),n=s(95704);let r="https://qnwcwoutgarhqxlgsjzs.supabase.co",i="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InFud2N3b3V0Z2FyaHF4bGdzanpzIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTY2NzM0MjgsImV4cCI6MjA3MjI0OTQyOH0.nooeC4pyNsoRok5zKat9iwUk9rgCfz_b5SWqZ7_dgtQ";if(!r)throw Error("NEXT_PUBLIC_SUPABASE_URL is required. Check your .env.local file.");if(!i)throw Error("NEXT_PUBLIC_SUPABASE_ANON_KEY is required. Check your .env.local file.");let c=(0,a.UU)(r||"",i||"");n.env.SUPABASE_SERVICE_ROLE_KEY&&(0,a.UU)(r||"",n.env.SUPABASE_SERVICE_ROLE_KEY,{auth:{autoRefreshToken:!1,persistSession:!1}})},64269:(e,t,s)=>{"use strict";s.d(t,{J8:()=>i,cn:()=>r});var a=s(2821),n=s(75889);function r(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,n.QP)((0,a.$)(t))}function i(e){switch(e.toLowerCase()){case"beginner":return"text-green-600 dark:text-green-400";case"intermediate":return"text-yellow-600 dark:text-yellow-400";case"advanced":return"text-red-600 dark:text-red-400";default:return"text-gray-600 dark:text-gray-400"}}},88384:(e,t,s)=>{Promise.resolve().then(s.bind(s,15420))}},e=>{e.O(0,[4909,5376,5040,8441,1255,7358],()=>e(e.s=88384)),_N_E=e.O()}]);